import{r as h,j as e}from"./index-DrZcI8kw.js";import{J as R}from"./DefaultLayout-C9JmGFd-.js";import{C as j}from"./CRow-BPMBjZUj.js";import{C as m,a as g}from"./CInputGroupText-7ZNNx0lJ.js";import{C as p}from"./CFormSelect-BpgCw8C9.js";import{a as w}from"./index.es-Dt0Z0pvM.js";const B={CQ_DS_GS:"Changquan, Daoshu, Gunshu",CQ_JS_QS:"Changquan, Jianshu, Qiangshu",NQ_ND_NG:"Nanquan, Nandao, Nangun",TQ_TJ:"Taijiquan, Taijijian"},x={Changquan:"CQ",Daoshu:"DS",Jianshu:"JS",Gunshu:"GS",Qiangshu:"QS",Nanquan:"NQ",Nandao:"ND",Nangun:"NG",Taijiquan:"TQ",Taijijian:"TJ"},ee=({showGenderFilter:v,showCategoryFilter:F,showEventFilter:f,showAthleteFilter:C})=>{const E=R(),{data:b,filters:n,setFilters:s}=E,{athleteData:o,date:P,isLoading:W,error:Y}=b,[S,u]=h.useState([e.jsx("option",{value:"",children:"*"}),...Object.entries(x).map(([t,a],i)=>e.jsx("option",{value:t.trim(),children:t.trim()},i))]),[_,A]=h.useState([e.jsx("option",{value:"",children:"*"})]);h.useEffect(()=>{n.categoryFilter.length===0?u([e.jsx("option",{value:"",children:"*"}),...Object.entries(x).map(([t,a],i)=>e.jsx("option",{value:t.trim(),children:t.trim()},i))]):(u([e.jsx("option",{value:"",children:"*"}),...B[n.categoryFilter].split(",").map((t,a)=>e.jsx("option",{value:t.trim(),children:t.trim()},a))]),n.categoryFilter.includes(n.eventFilter)||s(t=>({...t,eventFilter:""})))},[n.categoryFilter]),h.useEffect(()=>{if(n.athleteFilter.length===0)u([e.jsx("option",{value:"",children:"*"}),...Object.entries(x).map(([t,a],i)=>e.jsx("option",{value:t.trim(),children:t.trim()},i))]);else{let t=[];e:for(const a of Object.keys(o))for(const i of Object.keys(o[a])){const c=o[a][i];if(n.athleteFilter in c){t=c[n.athleteFilter].events.map(d=>d.event.split(" ")[d.event.split(" ").length-1]);break e}}u([e.jsx("option",{value:"",children:"*"}),...t.map((a,i)=>e.jsx("option",{value:a,children:a},i))]),t.includes(n.eventFilter)||s(a=>({...a,eventFilter:""}))}},[n.athleteFilter]),h.useEffect(()=>{localStorage.setItem("WushuToolkit-Adults25",JSON.stringify(n));let t=structuredClone(o);const{genderFilter:a,categoryFilter:i,eventFilter:c}=n;a.length>0&&(t={[a]:t[a]||{}}),Object.entries(t).forEach(([l,r])=>{i.length>0&&(t[l]={[i]:r[i]||{}})}),c.length>0&&Object.entries(t).forEach(([l,r])=>{Object.entries(r).forEach(([M,k])=>{Object.entries(k).forEach(([V,I])=>{var y;((y=I.events)==null?void 0:y.some(L=>L.event.includes(c)))||delete t[l][M][V]})})});const d=Object.entries(t.MALES||{}).flatMap(([l,r])=>Object.keys(r)),G=Object.entries(t.FEMALES||{}).flatMap(([l,r])=>Object.keys(r)),D=Array.from(new Set(d)).sort(),J=Array.from(new Set(G)).sort(),N=[...D,...J];A([e.jsx("option",{value:"",children:"*"},"all"),...N.map((l,r)=>e.jsx("option",{value:l,children:l},r))]),N.includes(n.athleteFilter)||s(l=>({...l,athleteFilter:""}))},[n.genderFilter,n.categoryFilter,n.eventFilter,o]);const Q=t=>{s(a=>({...a,genderFilter:t.target.value}))},T=t=>{s(a=>({...a,categoryFilter:t.target.value}))},O=t=>{s(a=>({...a,eventFilter:t.target.value}))},q=t=>{s(a=>({...a,athleteFilter:t.target.value}))};return e.jsxs(e.Fragment,{children:[v&&e.jsx(j,{children:e.jsxs(m,{className:"mb-3",children:[e.jsx(g,{style:{width:"100px"},children:"Gender: "}),e.jsxs(p,{value:n.genderFilter,onChange:Q,children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"MALES",children:"Male"}),e.jsx("option",{value:"FEMALES",children:"Female"})]})]})}),F&&e.jsx(j,{children:e.jsxs(m,{className:"mb-3",children:[e.jsx(g,{style:{width:"100px"},children:"Category: "}),e.jsxs(p,{value:n.categoryFilter,onChange:T,children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"CQ_DS_GS",children:"Changquan, Daoshu, Gunshu"}),e.jsx("option",{value:"CQ_JS_QS",children:"Changquan, Jianshu, Qiangshu"}),e.jsx("option",{value:"NQ_ND_NG",children:"Nanquan, Nandao, Nangun"}),e.jsx("option",{value:"TQ_TJ",children:"Taijiquan, Taijijian"})]})]})}),f&&e.jsx(j,{children:e.jsxs(m,{className:"mb-3",children:[e.jsx(g,{style:{width:"100px"},children:"Event: "}),e.jsx(p,{value:n.eventFilter,onChange:O,children:S})]})}),C&&e.jsx(j,{children:e.jsxs(m,{className:"mb-3",children:[e.jsx(g,{style:{width:"100px"},children:"Athlete: "}),e.jsx(p,{value:n.athleteFilter,onChange:q,children:_})]})}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(w,{style:{},color:"primary",onClick:()=>{s({genderFilter:v?"":n.genderFilter,categoryFilter:F?"":n.categoryFilter,eventFilter:f?"":n.eventFilter,athleteFilter:C?"":n.athleteFilter})},children:"Reset"})})]})};export{ee as A,B as C,x as E};
