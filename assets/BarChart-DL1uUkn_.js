import{u as kt,_ as $,b as Pt,d as lt,e as d,s as X,f as Z,g as tt,h as vt,i as st,j as et,D as It,k as it,l as Q,m as at,n as Lt,o as ct,p as dt,q as $t,r as jt,t as ot,v as wt,w as ht,x as xt,y as Mt,z as Bt,I as St,A as Rt,R as _t,C as Et,B as Gt,E as zt,F as Dt,G as Ht}from"./calculatePercentage-3oohkkUx.js";import{j as l,r as I}from"./index-CI4fC3kc.js";function ut(t){const s=kt();if(!t)return{isHighlighted:!1,isFaded:!1};const i=s.isHighlighted(t),e=!i&&s.isFaded(t);return{isHighlighted:i,isFaded:e}}const Ft=["id","dataIndex","classes","color","slots","slotProps","style","onClick"];function Tt(t){return st("MuiBarElement",t)}et("MuiBarElement",["root"]);const Ut=t=>{const{classes:s,id:i}=t,e={root:["root",`series-${i}`]};return Z(e,Tt,s)},Ot=X(tt.rect,{name:"MuiBarElement",slot:"Root",overridesResolver:(t,s)=>s.root})(({ownerState:t})=>({stroke:"none",fill:t.isHighlighted?vt(t.color).brighter(.5).formatHex():t.color,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",opacity:t.isFaded&&.3||1}));function Xt(t){const{id:s,dataIndex:i,classes:e,color:o,slots:a,slotProps:n,style:r,onClick:h}=t,x=$(t,Ft),p=Pt(),{isFaded:f,isHighlighted:c}=ut({seriesId:s,dataIndex:i}),m={id:s,dataIndex:i,classes:e,color:o,isFaded:f,isHighlighted:c},g=Ut(m),u=(a==null?void 0:a.bar)??Ot,C=lt({elementType:u,externalSlotProps:n==null?void 0:n.bar,externalForwardedProps:x,additionalProps:d({},p({type:"bar",seriesId:s,dataIndex:i}),{style:r,onClick:h,cursor:h?"pointer":"unset"}),className:g.root,ownerState:m});return l.jsx(u,d({},C))}function Kt(){const{chartId:t}=I.useContext(It);return I.useMemo(()=>t,[t])}const T=(t,{hasNegative:s,hasPositive:i,borderRadius:e,layout:o})=>{if(!e)return 0;const a=o==="vertical";return t==="top-left"&&(a&&i||!a&&s)||t==="top-right"&&(a&&i||!a&&i)||t==="bottom-right"&&(a&&s||!a&&i)||t==="bottom-left"&&(a&&s||!a&&s)?e:0},Nt=["style","maskId"],Vt=t=>`inset(0px round ${t.topLeft}px ${t.topRight}px ${t.bottomRight}px ${t.bottomLeft}px)`;function Wt(t){var i,e;const s=t.ownerState;return l.jsx(tt.rect,{style:d({},t.style,{clipPath:(t.ownerState.layout==="vertical"?(i=t.style)==null?void 0:i.height:(e=t.style)==null?void 0:e.width).to(o=>Vt({topLeft:Math.min(o,T("top-left",s)),topRight:Math.min(o,T("top-right",s)),bottomRight:Math.min(o,T("bottom-right",s)),bottomLeft:Math.min(o,T("bottom-left",s))}))})})}function Yt(t){const{style:s,maskId:i}=t,e=$(t,Nt);return!t.borderRadius||t.borderRadius<=0?null:l.jsx("clipPath",{id:i,children:l.jsx(Wt,{ownerState:e,style:s})})}function qt(t){return st("MuiBarLabel",t)}const q=et("MuiBarLabel",["root","highlighted","faded"]),Jt=t=>{const{classes:s,seriesId:i,isFaded:e,isHighlighted:o}=t,a={root:["root",`series-${i}`,o&&"highlighted",e&&"faded"]};return Z(a,qt,s)},Qt=t=>{const{barLabel:s,value:i,dataIndex:e,seriesId:o,height:a,width:n}=t;return s==="value"?i?i==null?void 0:i.toString():null:s({seriesId:o,dataIndex:e,value:i},{bar:{height:a,width:n}})},Zt=["seriesId","dataIndex","color","isFaded","isHighlighted","classes"],ts=X(tt.text,{name:"MuiBarLabel",slot:"Root",overridesResolver:(t,s)=>[{[`&.${q.faded}`]:s.faded},{[`&.${q.highlighted}`]:s.highlighted},s.root]})(({theme:t})=>{var s,i,e,o;return d({},(s=t==null?void 0:t.typography)==null?void 0:s.body2,{stroke:"none",fill:(o=(e=(i=t.vars||t)==null?void 0:i.palette)==null?void 0:e.text)==null?void 0:o.primary,transition:"opacity 0.2s ease-in, fill 0.2s ease-in",textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",opacity:1,[`&.${q.faded}`]:{opacity:.3}})});function ss(t){const s=it({props:t,name:"MuiBarLabel"}),i=$(s,Zt);return l.jsx(ts,d({},i))}const es=["seriesId","classes","color","style","dataIndex","barLabel","slots","slotProps","height","width","value"],is=["ownerState"];function os(t){const{seriesId:s,classes:i,color:e,style:o,dataIndex:a,barLabel:n,slots:r,slotProps:h,height:x,width:p,value:f}=t,c=$(t,es),{isFaded:m,isHighlighted:g}=ut({seriesId:s,dataIndex:a}),u={seriesId:s,classes:i,color:e,isFaded:m,isHighlighted:g,dataIndex:a},C=Jt(u),P=(r==null?void 0:r.barLabel)??ss,v=lt({elementType:P,externalSlotProps:h==null?void 0:h.barLabel,additionalProps:d({},c,{style:o,className:C.root}),ownerState:u}),{ownerState:L}=v,y=$(v,is);if(!n)return null;const A=Qt({barLabel:n,value:f,dataIndex:a,seriesId:s,height:x,width:p});return A?l.jsx(P,d({},y,L,{children:A})):null}const as=["bars","skipAnimation"],ns=({layout:t,yOrigin:s,x:i,width:e,y:o,xOrigin:a,height:n})=>d({},t==="vertical"?{y:s,x:i+e/2,height:0,width:e}:{y:o+n/2,x:a,height:n,width:0}),nt=({x:t,width:s,y:i,height:e})=>({x:t+s/2,y:i+e/2,height:e,width:s});function rs(t){const{bars:s,skipAnimation:i}=t,e=$(t,as),o=Q(s,{keys:a=>`${a.seriesId}-${a.dataIndex}`,from:ns,leave:null,enter:nt,update:nt,immediate:i});return l.jsx(I.Fragment,{children:o((a,{seriesId:n,dataIndex:r,color:h,value:x,width:p,height:f})=>l.jsx(os,d({seriesId:n,dataIndex:r,value:x,color:h,width:p,height:f},e,{style:a})))})}const J=(t,s)=>{const i=`${t}-axis`,e=`${t}Axis`;return s===(t==="x"?ct:dt)?`The first \`${e}\``:`The ${i} with id "${s}"`};function ls(t,s,i,e,o,a){const n=e[i],r=a[o],h=t?n:r,x=t?r:n,p=t?i:o,f=t?o:i,c=t?"x":"y",m=t?"y":"x";if(!at(h))throw new Error(`MUI X: ${J(c,p)} should be of type "band" to display the bar series of id "${s}".`);if(h.data===void 0)throw new Error(`MUI X: ${J(c,p)} should have data property.`);if(at(x)||Lt(x))throw new Error(`MUI X: ${J(m,f)} should be a continuous type to display the bar series of id "${s}".`)}const cs=["skipAnimation","onItemClick","borderRadius","barLabel"];function ds({bandWidth:t,numberOfGroups:s,gapRatio:i}){if(i===0)return{barWidth:t/s,offset:0};const e=t/(s+(s-1)*i),o=i*e;return{barWidth:e,offset:o}}const hs=()=>{const t=jt()??{series:{},stackingGroups:[]},s=ot(),i=Kt(),{series:e,stackingGroups:o}=t,{xAxis:a,yAxis:n,xAxisIds:r,yAxisIds:h}=s,x=r[0],p=h[0],f={};return{completedData:o.flatMap(({ids:m},g)=>m.flatMap(u=>{const C=e[u].xAxisId??e[u].xAxisKey??x,P=e[u].yAxisId??e[u].yAxisKey??p,v=a[C],L=n[P],y=e[u].layout==="vertical";ls(y,u,C,a,P,n);const A=y?v:L,j=v.scale,w=L.scale,B=wt(e[u],a[C],n[P]),K=A.scale.bandwidth(),{barWidth:E,offset:N}=ds({bandWidth:K,numberOfGroups:o.length,gapRatio:A.barGapRatio}),G=g*(E+N),{stackedData:V}=e[u];return V.map((W,M)=>{var D,H;const Y=W.map(F=>y?w(F):j(F)),S=Math.round(Math.min(...Y)),R=Math.round(Math.max(...Y)),z=e[u].stack,b={seriesId:u,dataIndex:M,layout:e[u].layout,x:y?j((D=a[C].data)==null?void 0:D[M])+G:S,y:y?S:w((H=n[P].data)==null?void 0:H[M])+G,xOrigin:j(0),yOrigin:w(0),height:y?R-S:E,width:y?E:R-S,color:B(M),value:e[u].data[M],maskId:`${i}_${z||u}_${g}_${M}`};f[b.maskId]||(f[b.maskId]={id:b.maskId,width:0,height:0,hasNegative:!1,hasPositive:!1,layout:b.layout,xOrigin:j(0),yOrigin:w(0),x:0,y:0});const k=f[b.maskId];return k.width=b.layout==="vertical"?b.width:k.width+b.width,k.height=b.layout==="vertical"?k.height+b.height:b.height,k.x=Math.min(k.x===0?1/0:k.x,b.x),k.y=Math.min(k.y===0?1/0:k.y,b.y),k.hasNegative=k.hasNegative||(b.value??0)<0,k.hasPositive=k.hasPositive||(b.value??0)>0,b})})),masksData:Object.values(f)}},U=({layout:t,yOrigin:s,x:i,width:e,y:o,xOrigin:a,height:n})=>d({},t==="vertical"?{y:s,x:i,height:0,width:e}:{y:o,x:a,height:n,width:0}),O=({x:t,width:s,y:i,height:e})=>({y:i,x:t,height:e,width:s});function xs(t){const{completedData:s,masksData:i}=hs(),{skipAnimation:e,onItemClick:o,borderRadius:a,barLabel:n}=t,r=$(t,cs),h=$t(e),x=!a||a<=0,p=Q(s,{keys:c=>`${c.seriesId}-${c.dataIndex}`,from:U,leave:U,enter:O,update:O,immediate:h}),f=Q(x?[]:i,{keys:c=>c.id,from:U,leave:U,enter:O,update:O,immediate:h});return l.jsxs(I.Fragment,{children:[!x&&f((c,{id:m,hasPositive:g,hasNegative:u,layout:C})=>l.jsx(Yt,{maskId:m,borderRadius:a,hasNegative:u,hasPositive:g,layout:C,style:c})),p((c,{seriesId:m,dataIndex:g,color:u,maskId:C})=>{const P=l.jsx(Xt,d({id:m,dataIndex:g,color:u},r,{onClick:o&&(v=>{o(v,{type:"bar",seriesId:m,dataIndex:g})}),style:c}));return x?P:l.jsx("g",{clipPath:`url(#${C})`,children:P})}),n&&l.jsx(rs,d({bars:s,skipAnimation:h,barLabel:n},r))]})}function us(t){const{id:s,offset:i}=t,{left:e,top:o,width:a,height:n}=ht(),r=d({top:0,right:0,bottom:0,left:0},i);return l.jsx("clipPath",{id:s,children:l.jsx("rect",{x:e-r.left,y:o-r.top,width:a+r.left+r.right,height:n+r.top+r.bottom})})}function ps(t){return st("MuiChartsGrid",t)}const rt=et("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),gs=X("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(t,s)=>[{[`&.${rt.verticalLine}`]:s.verticalLine},{[`&.${rt.horizontalLine}`]:s.horizontalLine},s.root]})({}),pt=X("line",{name:"MuiChartsGrid",slot:"Line",overridesResolver:(t,s)=>s.line})(({theme:t})=>({stroke:(t.vars||t).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function fs(t){const{axis:s,drawingArea:i,classes:e}=t,{scale:o,tickNumber:a,tickInterval:n}=s,r=xt({scale:o,tickNumber:a,tickInterval:n});return l.jsx(I.Fragment,{children:r.map(({value:h,offset:x})=>l.jsx(pt,{y1:i.top,y2:i.top+i.height,x1:x,x2:x,className:e.verticalLine},`vertical-${h}`))})}function ms(t){const{axis:s,drawingArea:i,classes:e}=t,{scale:o,tickNumber:a,tickInterval:n}=s,r=xt({scale:o,tickNumber:a,tickInterval:n});return l.jsx(I.Fragment,{children:r.map(({value:h,offset:x})=>l.jsx(pt,{y1:x,y2:x,x1:i.left,x2:i.left+i.width,className:e.horizontalLine},`horizontal-${h}`))})}const ys=["vertical","horizontal"],bs=({classes:t})=>Z({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},ps,t);function As(t){const s=it({props:t,name:"MuiChartsGrid"}),i=ht(),{vertical:e,horizontal:o}=s,a=$(s,ys),{xAxis:n,xAxisIds:r,yAxis:h,yAxisIds:x}=ot(),p=bs(s),f=h[x[0]],c=n[r[0]];return l.jsxs(gs,d({},a,{className:p.root,children:[e&&l.jsx(fs,{axis:c,drawingArea:i,classes:p}),o&&l.jsx(ms,{axis:f,drawingArea:i,classes:p})]}))}function Cs(t){const{onAxisClick:s}=t,i=Mt(),e=Bt(),{axis:o}=I.useContext(St),{xAxisIds:a,xAxis:n,yAxisIds:r,yAxis:h}=ot();return I.useEffect(()=>{const x=i.current;if(x===null||!s)return()=>{};const p=f=>{var P;f.preventDefault();const c=o.x&&o.x.index!==-1,m=c?a[0]:r[0],g=c?o.x&&o.x.index:o.y&&o.y.index;if(g==null)return;const u={};Object.keys(e).filter(v=>["bar","line"].includes(v)).forEach(v=>{var L;(L=e[v])==null||L.seriesOrder.forEach(y=>{const A=e[v].series[y],j=A.xAxisId??A.xAxisKey,w=A.yAxisId??A.yAxisKey,B=c?j:w;(B===void 0||B===m)&&(u[y]=A.data[g])})});const C=(P=(c?n:h)[m].data)==null?void 0:P[g];s(f,{dataIndex:g,axisValue:C,seriesValues:u})};return x.addEventListener("click",p),()=>{x.removeEventListener("click",p)}},[o.x,o.y,s,e,i,n,a,h,r]),l.jsx(I.Fragment,{})}const ks=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","tooltip","onAxisClick","axisHighlight","legend","grid","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","skipAnimation","loading","layout","onItemClick","highlightedItem","onHighlightChange","borderRadius","barLabel","className"],Ps=t=>{const{xAxis:s,yAxis:i,series:e,width:o,height:a,margin:n,colors:r,dataset:h,sx:x,tooltip:p,onAxisClick:f,axisHighlight:c,legend:m,grid:g,topAxis:u,leftAxis:C,rightAxis:P,bottomAxis:v,children:L,slots:y,slotProps:A,skipAnimation:j,loading:w,layout:B,onItemClick:K,highlightedItem:E,onHighlightChange:N,borderRadius:G,barLabel:V,className:W}=t,M=$(t,ks),S=`${Rt()}-clip-path`,R=B==="horizontal"||B===void 0&&e.some(_=>_.layout==="horizontal"),z={scaleType:"band",data:Array.from({length:Math.max(...e.map(_=>(_.data??h??[]).length))},(_,Ct)=>Ct)},b=d({},M,{series:e.map(_=>d({type:"bar"},_,{layout:R?"horizontal":"vertical"})),width:o,height:a,margin:n,colors:r,dataset:h,xAxis:s??(R?void 0:[d({id:ct},z)]),yAxis:i??(R?[d({id:dt},z)]:void 0),sx:x,highlightedItem:E,onHighlightChange:N,disableAxisListener:(p==null?void 0:p.trigger)!=="axis"&&(c==null?void 0:c.x)==="none"&&(c==null?void 0:c.y)==="none"&&!f,className:W,skipAnimation:j}),k={onItemClick:K,slots:y,slotProps:A,borderRadius:G,barLabel:V},D={onAxisClick:f},H={vertical:g==null?void 0:g.vertical,horizontal:g==null?void 0:g.horizontal},F={clipPath:`url(#${S})`},gt={id:S},ft={slots:y,slotProps:A,loading:w},mt={topAxis:u,leftAxis:C,rightAxis:P,bottomAxis:v,slots:y,slotProps:A},yt=d({},R?{y:"band"}:{x:"band"},c),bt=d({},m,{slots:y,slotProps:A}),At=d({},p,{slots:y,slotProps:A});return{chartContainerProps:b,barPlotProps:k,axisClickHandlerProps:D,gridProps:H,clipPathProps:gt,clipPathGroupProps:F,overlayProps:ft,chartsAxisProps:mt,axisHighlightProps:yt,legendProps:bt,tooltipProps:At,children:L}},Ls=I.forwardRef(function(s,i){const e=it({props:s,name:"MuiBarChart"}),{chartContainerProps:o,barPlotProps:a,axisClickHandlerProps:n,gridProps:r,clipPathProps:h,clipPathGroupProps:x,overlayProps:p,chartsAxisProps:f,axisHighlightProps:c,legendProps:m,tooltipProps:g,children:u}=Ps(e);return l.jsxs(_t,d({ref:i},o,{children:[e.onAxisClick&&l.jsx(Cs,d({},n)),l.jsx(As,d({},r)),l.jsxs("g",d({},x,{children:[l.jsx(xs,d({},a)),l.jsx(Et,d({},p)),l.jsx(Gt,d({},c))]})),l.jsx(zt,d({},f)),l.jsx(Dt,d({},m)),!e.loading&&l.jsx(Ht,d({},g)),l.jsx(us,d({},h)),u]}))});export{Ls as B};
