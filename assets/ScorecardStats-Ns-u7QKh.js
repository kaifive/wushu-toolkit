import{j as e}from"./index-AGV-BtG-.js";import{K as B}from"./DefaultLayout-CDkKquZ4.js";import{C as g}from"./CAlert-DoJKinWU.js";import{C as m,a as C}from"./CRow-CQ8WJVbn.js";import{C as A,a as y}from"./CCardBody-CIQgTKQV.js";import{C as b}from"./CCardHeader-0uJUzxc9.js";import{C as v,a as F,b as x,c as p,d as N,e as j}from"./CTable-CHF9eZMm.js";import"./index.es-DnX_xBLt.js";import"./authService-CncFObV5.js";function S(n){const a={};if(!n||typeof n!="object")return console.warn("Invalid dataset provided. Expected an object."),[];for(const o in n)if(Object.hasOwnProperty.call(n,o)&&typeof n[o]=="object"){const r=n[o];for(const i in r)if(Object.hasOwnProperty.call(r,i)&&typeof r[i]=="object"){const t=r[i];for(const u in t)if(Object.hasOwnProperty.call(t,u)&&typeof t[u]=="object"){const d=t[u];d.events&&Array.isArray(d.events)&&d.events.forEach(c=>{c.A&&c.A.deductions&&Array.isArray(c.A.deductions)&&c.A.deductions.forEach(s=>{if(typeof s=="string"&&s.trim()!==""){const l=s.trim();if(l.includes(".")||l==="0")return;a[l]=(a[l]||0)+1}})})}}}const f=Object.entries(a).map(([o,r])=>({code:o,count:r}));return f.sort((o,r)=>r.count-o.count),f}function w(n){const a=new Map;if(!n||typeof n!="object")return console.warn("Invalid dataset provided. Expected an object."),[];for(const o in n)if(Object.hasOwnProperty.call(n,o)&&typeof n[o]=="object"){const r=n[o];for(const i in r)if(Object.hasOwnProperty.call(r,i)&&typeof r[i]=="object"){const t=r[i];for(const u in t)if(Object.hasOwnProperty.call(t,u)&&typeof t[u]=="object"){const d=t[u];d.events&&Array.isArray(d.events)&&d.events.forEach(c=>{const s=c.event;if(s){a.has(s)||a.set(s,{sumA:0,countA:0,sumB:0,countB:0,sumC:0,countC:0,sumFinal:0,countFinal:0});const l=a.get(s);if(c.A&&c.A.score){const h=parseFloat(c.A.score);isNaN(h)||(l.sumA+=h,l.countA+=1)}if(c.B&&c.B.score){const h=parseFloat(c.B.score);isNaN(h)||(l.sumB+=h,l.countB+=1)}if(c.C&&c.C.score){const h=parseFloat(c.C.score);isNaN(h)||(l.sumC+=h,l.countC+=1)}if(c.finalScore){const h=parseFloat(c.finalScore);isNaN(h)||(l.sumFinal+=h,l.countFinal+=1)}}})}}}const f=[];return a.forEach((o,r)=>{const i=o.countA>0?(o.sumA/o.countA).toFixed(3):"N/A",t=o.countB>0?(o.sumB/o.countB).toFixed(3):"N/A",u=o.countC>0?(o.sumC/o.countC).toFixed(3):"N/A",d=o.countFinal>0?(o.sumFinal/o.countFinal).toFixed(3):"N/A";f.push({event:r,averageA:i,averageB:t,averageC:u,averageFinal:d})}),f.sort((o,r)=>{const i=parseFloat(o.averageFinal)||0;return(parseFloat(r.averageFinal)||0)-i}),f}const O=n=>{const a=n.match(/^\d+/);return a?a[0]:n},R=()=>{const n=B(),{data:a,filters:f,setFilters:o}=n,{athleteData:r,date:i,isLoading:t,error:u}=a;if(t)return e.jsx("div",{children:"Loading..."});if(u)return e.jsx(g,{color:"danger",children:"An error has occurred getting scores, refresh this page. If this problem continues to persist, contact Khai Nguyen."});const d=S(r).slice(0,10),c=w(r);return e.jsxs(e.Fragment,{children:[e.jsx(m,{children:e.jsx(C,{xs:12,children:e.jsxs(g,{color:"info",children:["Standings as of ",i,". To update scores, refresh this page or wait 1 minute."]})})}),e.jsx(m,{children:e.jsx(C,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(b,{children:e.jsx("strong",{children:"Top 10 Deductions"})}),e.jsx(y,{children:e.jsxs(v,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(F,{children:e.jsxs(x,{children:[e.jsx(p,{scope:"col",children:"Deduction Code"}),e.jsx(p,{scope:"col",children:"Number of Occurances"})]})}),e.jsx(N,{children:d.length===0?e.jsx(x,{children:e.jsx(j,{colSpan:4,className:"text-center text-muted",children:"No deductions yet."})}):d.map(s=>e.jsxs(x,{children:[e.jsx(p,{scope:"row",children:e.jsx("a",{href:`#/toolkit/deduction-code-lookup?code=${O(s.code)}`,target:"_blank",children:s.code})}),e.jsx(j,{children:s.count})]},`${s.code}`))})]})})]})})}),e.jsx(m,{children:e.jsx(C,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(b,{children:e.jsx("strong",{children:"Average Score Breakdowns By Event"})}),e.jsx(y,{children:e.jsxs(v,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(F,{children:e.jsxs(x,{children:[e.jsx(p,{scope:"col",children:"Event"}),e.jsx(p,{scope:"col",children:"Average A Score"}),e.jsx(p,{scope:"col",children:"Average B Score"}),e.jsx(p,{scope:"col",children:"Average C Score"}),e.jsx(p,{scope:"col",children:"Average Final Score"})]})}),e.jsx(N,{children:c.length===0?e.jsx(x,{children:e.jsx(j,{colSpan:4,className:"text-center text-muted",children:"No scores found."})}):c.map(s=>e.jsxs(x,{children:[e.jsx(p,{scope:"row",children:s.event}),e.jsx(j,{children:s.averageA}),e.jsx(j,{children:s.averageB}),e.jsx(j,{children:s.averageC}),e.jsx(j,{children:s.averageFinal})]},`${s.event.toLowerCase()}`))})]})})]})})})]})};export{R as default};
