import{r as d,j as e}from"./index-DcLqPGwt.js";import{C as x}from"./CAlert-DwxKNMs1.js";import{C as T}from"./CAlertLink-Di5-RdCm.js";import{C as t,a as m}from"./CRow-DT8FGYQw.js";import{C as p,a as j}from"./CCardBody-BMS5qQ0S.js";import{C as g}from"./CCardHeader-DE9gY19P.js";import{C as f,a as C}from"./CInputGroupText-CD0t-1WG.js";import{C as S}from"./CFormSelect-DgmPuPjM.js";import{a as N}from"./index.es-CW-sYaQU.js";import{C as D,a as E,b,c as l,d as F,e as o}from"./CTable-D0drLPHx.js";import"./authService-COr-Xw-Y.js";import"./CFormControlWrapper-BoBMX0IL.js";import"./CFormControlValidation-CEoINJmx.js";import"./CFormLabel-DTweiwdG.js";function k(c){const a=c.map(n=>fetch(n).then(r=>{if(!r.ok)throw new Error(`Network response was not ok for URL: ${n}`);return r.json()}).then(r=>{if(!r.schedule)throw new Error(`Schedule data not found for URL: ${n}`);return{ring:r.schedule.ringName,schedule:r.schedule.events}}).catch(r=>{throw console.error(`Error fetching schedule for URL ${n}:`,r),r}));return Promise.all(a).then(n=>{const h=new Date().toLocaleString("en-US",{timeZone:"America/Los_Angeles"})+" (PDT)";return{schedules:n,loading:!1,syncDate:h}}).catch(n=>({schedules:[],loading:!1,error:n}))}const z=()=>{const[c,a]=d.useState(""),[n,r]=d.useState(""),[h,u]=d.useState({schedules:[],loading:!0,error:null});d.useEffect(()=>{k(["https://bowuu.com/v1/schedule/ring/167","https://bowuu.com/v1/schedule/ring/166","https://bowuu.com/v1/schedule/ring/170","https://bowuu.com/v1/schedule/ring/169"]).then(i=>{u(i)}).catch(i=>{u({schedules:[],loading:!1,error:i})})},[u]);const{schedules:w,loading:y,error:v,syncDate:R}=h;return y?e.jsx("div",{children:"Loading..."}):v?e.jsxs(x,{color:"danger",children:["An error has occurred getting schedules, refresh this page. If this problem continues to persist, check the ",e.jsx(T,{href:"https://bowuu.com/schedule",target:"_blank",children:"Official Schedule"}),"."]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{children:e.jsx(m,{xs:12,children:e.jsxs(x,{color:"info",children:["Schedule as of ",R,". To update schedule, refresh this page."]})})}),e.jsx(t,{children:e.jsx(m,{xs:12,children:e.jsxs(p,{className:"mb-4",children:[e.jsx(g,{children:e.jsx("strong",{children:"Schedule Filters"})}),e.jsxs(j,{children:[e.jsx(t,{children:e.jsxs(f,{className:"mb-3",children:[e.jsx(C,{style:{width:"75px"},children:"Day: "}),e.jsxs(S,{value:c,onChange:s=>a(s.target.value),children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"Sun",children:"Sunday"}),e.jsx("option",{value:"Mon",children:"Monday"})]})]})}),e.jsx(t,{children:e.jsxs(f,{className:"mb-3",children:[e.jsx(C,{style:{width:"75px"},children:"Ring: "}),e.jsxs(S,{value:n,onChange:s=>r(s.target.value),children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"Ring8",children:"Ring 8"}),e.jsx("option",{value:"Ring9",children:"Ring 9"})]})]})}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(N,{style:{},color:"primary",onClick:()=>{a(""),r("")},children:"Reset Filters"})})]})]})})}),e.jsx(t,{children:e.jsx(m,{xs:12,children:w.map(s=>{if(s.ring.includes(c)&&s.ring.includes(n))return e.jsxs(p,{className:"mb-4",children:[e.jsxs(g,{children:[e.jsxs("strong",{children:["Ring ",s.ring.slice(4,5)," Schedule"]})," - ",s.ring.slice(6,9),"day"]}),e.jsx(j,{children:e.jsxs(D,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(E,{children:e.jsxs(b,{children:[e.jsx(l,{scope:"col",children:"Day"}),e.jsx(l,{scope:"col",children:"Event"}),e.jsx(l,{scope:"col",children:"Group"}),e.jsx(l,{scope:"col",children:"Gender"}),e.jsx(l,{scope:"col",children:"~Start Time"})]})}),e.jsx(F,{children:s.schedule.map(i=>e.jsxs(b,{children:[e.jsxs(o,{children:[s.ring.slice(6,9),"day"]}),e.jsx(o,{children:i.eventName}),e.jsx(o,{children:i.ageGroupName}),e.jsx(o,{children:i.gender}),e.jsx(o,{children:i.isComplete?"Completed":i.startTime?i.startTime:"In Progress"})]},i.competitionEventId))})]})})]},s.ring)})})})]})};export{z as default};
