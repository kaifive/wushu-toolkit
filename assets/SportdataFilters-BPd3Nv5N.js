import{r as d,j as e}from"./index-Dl3DiWb5.js";import{K as J}from"./DefaultLayout-DgiSTkb4.js";import{C as A}from"./categoryMap-DHDUkJdo.js";import{C as j}from"./CRow-CnAK2m12.js";import{C as p,a as x}from"./CInputGroupText-DzeTuzHg.js";import{C as v}from"./CFormSelect-CuQ5ThQC.js";import{a as D}from"./index.es-BPimW0q8.js";const M={Changquan:"CQ",Daoshu:"DS",Jianshu:"JS",Gunshu:"GS",Qiangshu:"QS",Nanquan:"NQ",Nandao:"ND",Nangun:"NG",Taijiquan:"TQ",Taijijian:"TJ"},K=({showGenderFilter:F,showCategoryFilter:g,showEventFilter:f,showAthleteFilter:y})=>{const{data:N,filters:t,setFilters:r}=J(),{athleteData:c={},isLoading:C}=N,[E,m]=d.useState([]),[S,b]=d.useState([]);d.useEffect(()=>{var a;if(t.athleteFilter){const i=[];for(const n of Object.keys(c))for(const u of Object.keys(c[n])){const h=c[n][u];t.athleteFilter in h&&h[t.athleteFilter].events.forEach(s=>{const o=s.event.split(" ");i.push(o[o.length-1])})}const l=[...new Set(i)];m([e.jsx("option",{value:"",children:"*"},"*"),...l.map((n,u)=>e.jsx("option",{value:n,children:n},u))]),l.includes(t.eventFilter)||r({...t,eventFilter:""})}else if(t.categoryFilter){const i=((a=A[t.categoryFilter])==null?void 0:a.split(",").map(l=>l.trim()))||[];m([e.jsx("option",{value:"",children:"*"},"*"),...i.map((l,n)=>e.jsx("option",{value:l,children:l},n))]),i.includes(t.eventFilter)||r({...t,eventFilter:""})}else{const i=Object.keys(M);m([e.jsx("option",{value:"",children:"*"},"*"),...i.map((l,n)=>e.jsx("option",{value:l,children:l},n))])}},[t.categoryFilter,t.athleteFilter]),d.useEffect(()=>{if(!c||C)return;const{genderFilter:a,categoryFilter:i,eventFilter:l}=t;let n=JSON.parse(JSON.stringify(c));a&&(n={[a]:n[a]||{}}),Object.entries(n).forEach(([s,o])=>{i&&(n[s]={[i]:o[i]||{}}),Object.entries(n[s]).forEach(([T,Q])=>{Object.entries(Q).forEach(([q,G])=>{l&&!G.events.some(_=>_.event.includes(l))&&delete n[s][T][q]})})});const u=Object.values(n).flatMap(s=>Object.values(s).flatMap(o=>Object.keys(o))),h=[...new Set(u)].sort();b([e.jsx("option",{value:"",children:"*"},"all"),...h.map((s,o)=>e.jsx("option",{value:s,children:s},o))]),h.includes(t.athleteFilter)||r({...t,athleteFilter:""})},[c,t.genderFilter,t.categoryFilter,t.eventFilter]);const O=()=>{r({genderFilter:F?"":t.genderFilter,categoryFilter:g?"":t.categoryFilter,eventFilter:f?"":t.eventFilter,athleteFilter:y?"":t.athleteFilter})};return e.jsxs(e.Fragment,{children:[F&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(x,{style:{width:"100px"},children:"Gender:"}),e.jsxs(v,{value:t.genderFilter,onChange:a=>r({...t,genderFilter:a.target.value}),children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"MALES",children:"Male"}),e.jsx("option",{value:"FEMALES",children:"Female"})]})]})}),g&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(x,{style:{width:"100px"},children:"Category:"}),e.jsxs(v,{value:t.categoryFilter,onChange:a=>r({...t,categoryFilter:a.target.value}),children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"CQ_DS_GS",children:"Changquan, Daoshu, Gunshu"}),e.jsx("option",{value:"CQ_JS_QS",children:"Changquan, Jianshu, Qiangshu"}),e.jsx("option",{value:"NQ_ND_NG",children:"Nanquan, Nandao, Nangun"}),e.jsx("option",{value:"TQ_TJ",children:"Taijiquan, Taijijian"})]})]})}),f&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(x,{style:{width:"100px"},children:"Event:"}),e.jsx(v,{value:t.eventFilter,onChange:a=>r({...t,eventFilter:a.target.value}),children:E})]})}),y&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(x,{style:{width:"100px"},children:"Athlete:"}),e.jsx(v,{value:t.athleteFilter,onChange:a=>r({...t,athleteFilter:a.target.value}),children:S})]})}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(D,{color:"primary",onClick:O,children:"Reset"})})]})};export{M as E,K as S};
