import{r as u,j as e}from"./index-Bv8TyUYH.js";import{J as R}from"./DefaultLayout-DKRWV1iK.js";import{C as j}from"./CRow-_3QvRquT.js";import{C as p,a as m}from"./CInputGroupText-XlONipke.js";import{C as g}from"./CFormSelect-D1Z_Sqik.js";import{a as B}from"./index.es-DxTKonIH.js";const P={CQ_DS_GS:"Changquan, Daoshu, Gunshu",CQ_JS_QS:"Changquan, Jianshu, Qiangshu",NQ_ND_NG:"Nanquan, Nandao, Nangun",TQ_TJ:"Taijiquan, Taijijian"},x={Changquan:"CQ",Daoshu:"DS",Jianshu:"JS",Gunshu:"GS",Qiangshu:"QS",Nanquan:"NQ",Nandao:"ND",Nangun:"NG",Taijiquan:"TQ",Taijijian:"TJ"},te=({showGenderFilter:v,showCategoryFilter:F,showEventFilter:f,showAthleteFilter:C})=>{const y=R(),{data:E,filters:a,setFilters:s}=y,{athleteData:c,date:W,isLoading:Y,error:$}=E,[_,d]=u.useState([e.jsx("option",{value:"",children:"*"},"*"),...Object.entries(x).map(([n,t],i)=>e.jsx("option",{value:n.trim(),children:n.trim()},i))]),[b,q]=u.useState([e.jsx("option",{value:"",children:"*"},"*")]);u.useEffect(()=>{a.categoryFilter.length===0?d([e.jsx("option",{value:"",children:"*"},"*"),...Object.entries(x).map(([n,t],i)=>e.jsx("option",{value:n.trim(),children:n.trim()},i))]):(d([e.jsx("option",{value:"",children:"*"},"*"),...P[a.categoryFilter].split(",").map((n,t)=>e.jsx("option",{value:n.trim(),children:n.trim()},t))]),a.categoryFilter.includes(a.eventFilter)||s(n=>({...n,eventFilter:""})))},[a.categoryFilter]),u.useEffect(()=>{if(a.athleteFilter.length===0)d([e.jsx("option",{value:"",children:"*"},"*"),...Object.entries(x).map(([n,t],i)=>e.jsx("option",{value:n.trim(),children:n.trim()},i))]);else{let n=[];for(const t of Object.keys(c))for(const i of Object.keys(c[t])){const o=c[t][i];a.athleteFilter in o&&n.push(...o[a.athleteFilter].events.map(h=>h.event.split(" ")[h.event.split(" ").length-1]))}d([e.jsx("option",{value:"",children:"*"},"*"),...n.map((t,i)=>e.jsx("option",{value:t,children:t},i))]),n.includes(a.eventFilter)||s(t=>({...t,eventFilter:""}))}},[a.athleteFilter]),u.useEffect(()=>{const n=window.location.hash.split("/")[1];localStorage.setItem(`WushuToolkit-Sportdata-${n}`,JSON.stringify(a));let t=structuredClone(c);const{genderFilter:i,categoryFilter:o,eventFilter:h}=a;i.length>0&&(t={[i]:t[i]||{}}),Object.entries(t).forEach(([l,r])=>{o.length>0&&(t[l]={[o]:r[o]||{}})}),h.length>0&&Object.entries(t).forEach(([l,r])=>{Object.entries(r).forEach(([k,V])=>{Object.entries(V).forEach(([w,I])=>{var S;((S=I.events)==null?void 0:S.some(L=>L.event.includes(h)))||delete t[l][k][w]})})});const G=Object.entries(t.MALES||{}).flatMap(([l,r])=>Object.keys(r)),D=Object.entries(t.FEMALES||{}).flatMap(([l,r])=>Object.keys(r)),J=Array.from(new Set(G)).sort(),M=Array.from(new Set(D)).sort(),N=[...J,...M];q([e.jsx("option",{value:"",children:"*"},"all"),...N.map((l,r)=>e.jsx("option",{value:l,children:l},r))]),N.includes(a.athleteFilter)||s(l=>({...l,athleteFilter:""}))},[a.genderFilter,a.categoryFilter,a.eventFilter,c]);const Q=n=>{s(t=>({...t,genderFilter:n.target.value}))},T=n=>{s(t=>({...t,categoryFilter:n.target.value}))},O=n=>{s(t=>({...t,eventFilter:n.target.value}))},A=n=>{s(t=>({...t,athleteFilter:n.target.value}))};return e.jsxs(e.Fragment,{children:[v&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(m,{style:{width:"100px"},children:"Gender: "}),e.jsxs(g,{value:a.genderFilter,onChange:Q,children:[e.jsx("option",{value:"",children:"*"},"*"),e.jsx("option",{value:"MALES",children:"Male"},"males"),e.jsx("option",{value:"FEMALES",children:"Female"},"females")]})]})}),F&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(m,{style:{width:"100px"},children:"Category: "}),e.jsxs(g,{value:a.categoryFilter,onChange:T,children:[e.jsx("option",{value:"",children:"*"},"*"),e.jsx("option",{value:"CQ_DS_GS",children:"Changquan, Daoshu, Gunshu"},"cq_ds_gs"),e.jsx("option",{value:"CQ_JS_QS",children:"Changquan, Jianshu, Qiangshu"},"cq_js_qs"),e.jsx("option",{value:"NQ_ND_NG",children:"Nanquan, Nandao, Nangun"},"nq_nd_ng"),e.jsx("option",{value:"TQ_TJ",children:"Taijiquan, Taijijian"},"tq_tj")]})]})}),f&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(m,{style:{width:"100px"},children:"Event: "}),e.jsx(g,{value:a.eventFilter,onChange:O,children:_})]})}),C&&e.jsx(j,{children:e.jsxs(p,{className:"mb-3",children:[e.jsx(m,{style:{width:"100px"},children:"Athlete: "}),e.jsx(g,{value:a.athleteFilter,onChange:A,children:b})]})}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(B,{style:{},color:"primary",onClick:()=>{s({genderFilter:v?"":a.genderFilter,categoryFilter:F?"":a.categoryFilter,eventFilter:f?"":a.eventFilter,athleteFilter:C?"":a.athleteFilter})},children:"Reset"})})]})};export{P as C,x as E,te as S};
