import{H as ce,J as O,K as F,L as D,M as he,N as H,O as Ce,P as V,Q as ae,S as ge,T as w,U as pe,V as Ie,W as ke,_ as Z,b as Te,s as me,e as T,X as G,f as Ae,g as ye,i as $e,j as be,u as _e,l as Pe,Y as fe,Z as je,D as we,q as He,k as Fe,$ as Ee,R as Ne,o as Se,E as Ue,C as De,F as Oe,B as We,G as qe}from"./calculatePercentage-xbKYZG6D.js";import{j,r as de}from"./index-KKnklIW8.js";const re=Math.PI,oe=2*re,W=1e-6,Xe=oe-W;function Le(e){this._+=e[0];for(let i=1,t=e.length;i<t;++i)this._+=arguments[i]+e[i]}function Ve(e){let i=Math.floor(e);if(!(i>=0))throw new Error(`invalid digits: ${e}`);if(i>15)return Le;const t=10**i;return function(n){this._+=n[0];for(let a=1,r=n.length;a<r;++a)this._+=Math.round(arguments[a]*t)/t+n[a]}}class Ze{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?Le:Ve(i)}moveTo(i,t){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,t){this._append`L${this._x1=+i},${this._y1=+t}`}quadraticCurveTo(i,t,n,a){this._append`Q${+i},${+t},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(i,t,n,a,r,c){this._append`C${+i},${+t},${+n},${+a},${this._x1=+r},${this._y1=+c}`}arcTo(i,t,n,a,r){if(i=+i,t=+t,n=+n,a=+a,r=+r,r<0)throw new Error(`negative radius: ${r}`);let c=this._x1,o=this._y1,f=n-i,u=a-t,s=c-i,g=o-t,d=s*s+g*g;if(this._x1===null)this._append`M${this._x1=i},${this._y1=t}`;else if(d>W)if(!(Math.abs(g*f-u*s)>W)||!r)this._append`L${this._x1=i},${this._y1=t}`;else{let l=n-c,m=a-o,R=f*f+u*u,P=l*l+m*m,p=Math.sqrt(R),x=Math.sqrt(d),A=r*Math.tan((re-Math.acos((R+d-P)/(2*p*x)))/2),y=A/x,$=A/p;Math.abs(y-1)>W&&this._append`L${i+y*s},${t+y*g}`,this._append`A${r},${r},0,0,${+(g*l>s*m)},${this._x1=i+$*f},${this._y1=t+$*u}`}}arc(i,t,n,a,r,c){if(i=+i,t=+t,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),f=n*Math.sin(a),u=i+o,s=t+f,g=1^c,d=c?a-r:r-a;this._x1===null?this._append`M${u},${s}`:(Math.abs(this._x1-u)>W||Math.abs(this._y1-s)>W)&&this._append`L${u},${s}`,n&&(d<0&&(d=d%oe+oe),d>Xe?this._append`A${n},${n},0,1,${g},${i-o},${t-f}A${n},${n},0,1,${g},${this._x1=u},${this._y1=s}`:d>W&&this._append`A${n},${n},0,${+(d>=re)},${g},${this._x1=i+n*Math.cos(r)},${this._y1=t+n*Math.sin(r)}`)}rect(i,t,n,a){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+t}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function ze(e){let i=3;return e.digits=function(t){if(!arguments.length)return i;if(t==null)i=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);i=n}return e},()=>new Ze(i)}function Be(e){return e.innerRadius}function Ke(e){return e.outerRadius}function Qe(e){return e.startAngle}function Ye(e){return e.endAngle}function Ge(e){return e&&e.padAngle}function Je(e,i,t,n,a,r,c,o){var f=t-e,u=n-i,s=c-a,g=o-r,d=g*f-s*u;if(!(d*d<H))return d=(s*(i-r)-g*(e-a))/d,[e+d*f,i+d*u]}function Y(e,i,t,n,a,r,c){var o=e-t,f=i-n,u=(c?r:-r)/V(o*o+f*f),s=u*f,g=-u*o,d=e+s,l=i+g,m=t+s,R=n+g,P=(d+m)/2,p=(l+R)/2,x=m-d,A=R-l,y=x*x+A*A,$=a-r,_=d*R-m*l,v=(A<0?-1:1)*V(Ie(0,$*$*y-_*_)),C=(_*A-x*v)/y,I=(-_*x-A*v)/y,L=(_*A+x*v)/y,M=(-_*x+A*v)/y,k=C-P,h=I-p,b=L-P,E=M-p;return k*k+h*h>b*b+E*E&&(C=L,I=M),{cx:C,cy:I,x01:-s,y01:-g,x11:C*(a/$-1),y11:I*(a/$-1)}}function Me(){var e=Be,i=Ke,t=D(0),n=null,a=Qe,r=Ye,c=Ge,o=null,f=ze(u);function u(){var s,g,d=+e.apply(this,arguments),l=+i.apply(this,arguments),m=a.apply(this,arguments)-he,R=r.apply(this,arguments)-he,P=ge(R-m),p=R>m;if(o||(o=s=f()),l<d&&(g=l,l=d,d=g),!(l>H))o.moveTo(0,0);else if(P>Ce-H)o.moveTo(l*O(m),l*F(m)),o.arc(0,0,l,m,R,!p),d>H&&(o.moveTo(d*O(R),d*F(R)),o.arc(0,0,d,R,m,p));else{var x=m,A=R,y=m,$=R,_=P,v=P,C=c.apply(this,arguments)/2,I=C>H&&(n?+n.apply(this,arguments):V(d*d+l*l)),L=ae(ge(l-d)/2,+t.apply(this,arguments)),M=L,k=L,h,b;if(I>H){var E=pe(I/d*F(C)),N=pe(I/l*F(C));(_-=E*2)>H?(E*=p?1:-1,y+=E,$-=E):(_=0,y=$=(m+R)/2),(v-=N*2)>H?(N*=p?1:-1,x+=N,A-=N):(v=0,x=A=(m+R)/2)}var U=l*O(x),X=l*F(x),z=d*O($),B=d*F($);if(L>H){var K=l*O(A),Q=l*F(A),J=d*O(y),ee=d*F(y),S;if(P<ce)if(S=Je(U,X,J,ee,K,Q,z,B)){var ie=U-S[0],te=X-S[1],ne=K-S[0],se=Q-S[1],le=1/F(ke((ie*ne+te*se)/(V(ie*ie+te*te)*V(ne*ne+se*se)))/2),ue=V(S[0]*S[0]+S[1]*S[1]);M=ae(L,(d-ue)/(le-1)),k=ae(L,(l-ue)/(le+1))}else M=k=0}v>H?k>H?(h=Y(J,ee,U,X,l,k,p),b=Y(K,Q,z,B,l,k,p),o.moveTo(h.cx+h.x01,h.cy+h.y01),k<L?o.arc(h.cx,h.cy,k,w(h.y01,h.x01),w(b.y01,b.x01),!p):(o.arc(h.cx,h.cy,k,w(h.y01,h.x01),w(h.y11,h.x11),!p),o.arc(0,0,l,w(h.cy+h.y11,h.cx+h.x11),w(b.cy+b.y11,b.cx+b.x11),!p),o.arc(b.cx,b.cy,k,w(b.y11,b.x11),w(b.y01,b.x01),!p))):(o.moveTo(U,X),o.arc(0,0,l,x,A,!p)):o.moveTo(U,X),!(d>H)||!(_>H)?o.lineTo(z,B):M>H?(h=Y(z,B,K,Q,d,-M,p),b=Y(U,X,J,ee,d,-M,p),o.lineTo(h.cx+h.x01,h.cy+h.y01),M<L?o.arc(h.cx,h.cy,M,w(h.y01,h.x01),w(b.y01,b.x01),!p):(o.arc(h.cx,h.cy,M,w(h.y01,h.x01),w(h.y11,h.x11),!p),o.arc(0,0,d,w(h.cy+h.y11,h.cx+h.x11),w(b.cy+b.y11,b.cx+b.x11),p),o.arc(b.cx,b.cy,M,w(b.y11,b.x11),w(b.y01,b.x01),!p))):o.arc(0,0,d,$,y,p)}if(o.closePath(),s)return o=null,s+""||null}return u.centroid=function(){var s=(+e.apply(this,arguments)+ +i.apply(this,arguments))/2,g=(+a.apply(this,arguments)+ +r.apply(this,arguments))/2-ce/2;return[O(g)*s,F(g)*s]},u.innerRadius=function(s){return arguments.length?(e=typeof s=="function"?s:D(+s),u):e},u.outerRadius=function(s){return arguments.length?(i=typeof s=="function"?s:D(+s),u):i},u.cornerRadius=function(s){return arguments.length?(t=typeof s=="function"?s:D(+s),u):t},u.padRadius=function(s){return arguments.length?(n=s==null?null:typeof s=="function"?s:D(+s),u):n},u.startAngle=function(s){return arguments.length?(a=typeof s=="function"?s:D(+s),u):a},u.endAngle=function(s){return arguments.length?(r=typeof s=="function"?s:D(+s),u):r},u.padAngle=function(s){return arguments.length?(c=typeof s=="function"?s:D(+s),u):c},u.context=function(s){return arguments.length?(o=s??null,u):o},u}function q(e,i){if(typeof e=="number")return e;if(e==="100%")return i;if(e.endsWith("%")){const t=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(t))return t*i/100}if(e.endsWith("px")){const t=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(t))return t}throw new Error(`MUI X: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}const ei=["classes","color","cornerRadius","dataIndex","endAngle","id","innerRadius","isFaded","isHighlighted","onClick","outerRadius","paddingAngle","startAngle","highlightScope"];function ii(e){return $e("MuiPieArc",e)}be("MuiPieArc",["root","highlighted","faded"]);const ti=e=>{const{classes:i,id:t,isFaded:n,isHighlighted:a,dataIndex:r}=e,c={root:["root",`series-${t}`,`data-index-${r}`,a&&"highlighted",n&&"faded"]};return Ae(c,ii,i)},ni=me(ye.path,{name:"MuiPieArc",slot:"Root",overridesResolver:(e,i)=>i.arc})(({theme:e})=>({stroke:(e.vars||e).palette.background.paper,transition:"opacity 0.2s ease-in, fill 0.2s ease-in, filter 0.2s ease-in"}));function si(e){const{classes:i,color:t,cornerRadius:n,dataIndex:a,endAngle:r,id:c,innerRadius:o,isFaded:f,isHighlighted:u,onClick:s,outerRadius:g,paddingAngle:d,startAngle:l}=e,m=Z(e,ei),R={id:c,dataIndex:a,classes:i,color:t,isFaded:f,isHighlighted:u},P=ti(R),p=Te();return j.jsx(ni,T({d:G([l,r,d,o,g,n],(x,A,y,$,_,v)=>Me().cornerRadius(v)({padAngle:y,startAngle:x,endAngle:A,innerRadius:$,outerRadius:_})),visibility:G([l,r],(x,A)=>x===A?"hidden":"visible"),onClick:s,cursor:s?"pointer":"unset",ownerState:R,className:P.root,fill:R.color,opacity:R.isFaded?.3:1,filter:R.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round"},m,p({type:"pie",seriesId:c,dataIndex:a})))}const ai={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,color:c,isFaded:o})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:t,startAngle:(n+a)/2,endAngle:(n+a)/2,paddingAngle:r,fill:c,opacity:o?.3:1}),leave:({innerRadius:e,startAngle:i,endAngle:t})=>({innerRadius:e,outerRadius:e,startAngle:(i+t)/2,endAngle:(i+t)/2}),enter:({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n})=>({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n}),update:({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,color:c,isFaded:o})=>({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,fill:c,opacity:o?.3:1}),config:{tension:120,friction:14,clamp:!0}},ri={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,arcLabelRadius:t,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:c})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:n,arcLabelRadius:t,startAngle:(a+r)/2,endAngle:(a+r)/2,paddingAngle:c,opacity:0}),leave:({innerRadius:e,startAngle:i,endAngle:t})=>({innerRadius:e,outerRadius:e,arcLabelRadius:e,startAngle:(i+t)/2,endAngle:(i+t)/2,opacity:0}),enter:({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n,arcLabelRadius:a})=>({innerRadius:e,outerRadius:i,startAngle:t,endAngle:n,arcLabelRadius:a,opacity:1}),update:({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,arcLabelRadius:c})=>({innerRadius:e,outerRadius:i,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:r,arcLabelRadius:c,opacity:1}),config:{tension:120,friction:14,clamp:!0}};function ve(e){const{id:i,data:t,faded:n,highlighted:a,paddingAngle:r=0,innerRadius:c=0,arcLabelRadius:o,outerRadius:f,cornerRadius:u=0}=e,{isFaded:s,isHighlighted:g}=_e();return de.useMemo(()=>t.map((l,m)=>{const R={seriesId:i,dataIndex:m},P=g(R),p=!P&&s(R),x=T({additionalRadius:0},p&&n||P&&a||{}),A=Math.max(0,Math.PI*(x.paddingAngle??r)/180),y=Math.max(0,x.innerRadius??c),$=Math.max(0,x.outerRadius??f+x.additionalRadius),_=x.cornerRadius??u,v=x.arcLabelRadius??o??(y+$)/2;return T({},l,x,{isFaded:p,isHighlighted:P,paddingAngle:A,innerRadius:y,outerRadius:$,cornerRadius:_,arcLabelRadius:v})}),[u,c,f,r,o,t,n,a,s,g,i])}const oi=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function di(e){const{slots:i,slotProps:t,innerRadius:n=0,outerRadius:a,cornerRadius:r=0,paddingAngle:c=0,id:o,highlighted:f,faded:u={additionalRadius:-5},data:s,onItemClick:g,skipAnimation:d}=e,l=Z(e,oi),m=ve({innerRadius:n,outerRadius:a,cornerRadius:r,paddingAngle:c,id:o,highlighted:f,faded:u,data:s}),R=Pe(m,T({},ai,{immediate:d})),{highlightScope:P}=_e();if(s.length===0)return null;const p=(i==null?void 0:i.pieArc)??si;return j.jsx("g",T({},l,{children:R(({startAngle:x,endAngle:A,paddingAngle:y,innerRadius:$,outerRadius:_,cornerRadius:v},C,I,L)=>j.jsx(p,T({startAngle:x,endAngle:A,paddingAngle:y,innerRadius:$,outerRadius:_,cornerRadius:v,id:o,color:C.color,dataIndex:L,highlightScope:P,isFaded:C.isFaded,isHighlighted:C.isHighlighted,onClick:g&&(M=>{g(M,{type:"pie",seriesId:o,dataIndex:L},C)})},t==null?void 0:t.pieArc)))}))}const li=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style"];function ui(e){return $e("MuiPieArcLabel",e)}be("MuiPieArcLabel",["root","highlighted","faded"]);const ci=e=>{const{classes:i,id:t,isFaded:n,isHighlighted:a}=e,r={root:["root",`series-${t}`,a&&"highlighted",n&&"faded"]};return Ae(r,ui,i)},hi=me(ye.text,{name:"MuiPieArcLabel",slot:"Root",overridesResolver:(e,i)=>i.root})(({theme:e})=>({fill:(e.vars||e).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none"})),Re=(e,i)=>(t,n,a,r,c)=>{if(!e)return 0;const[o,f]=Me().cornerRadius(c).centroid({padAngle:a,startAngle:t,endAngle:n,innerRadius:r,outerRadius:r});return i==="x"?o:f};function gi(e){const{id:i,classes:t,color:n,startAngle:a,endAngle:r,paddingAngle:c,arcLabelRadius:o,cornerRadius:f,formattedArcLabel:u,isHighlighted:s,isFaded:g,style:d}=e,l=Z(e,li),R=ci({id:i,classes:t,isFaded:g,isHighlighted:s});return j.jsx(hi,T({className:R.root},l,{style:T({x:G([a,r,c,o,f],Re(u,"x")),y:G([a,r,c,o,f],Re(u,"y"))},d),children:u}))}const pi=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],fi=["startAngle","endAngle","paddingAngle","innerRadius","outerRadius","arcLabelRadius","cornerRadius"],Ri=180/Math.PI;function xi(e,i,t){var a;if(!e||(t.endAngle-t.startAngle)*Ri<i)return null;switch(e){case"label":return fe(t.label,"arc");case"value":return(a=t.value)==null?void 0:a.toString();case"formattedValue":return t.formattedValue;default:return e(T({},t,{label:fe(t.label,"arc")}))}}function mi(e){const{arcLabel:i,arcLabelMinAngle:t=0,arcLabelRadius:n,cornerRadius:a=0,data:r,faded:c={additionalRadius:-5},highlighted:o,id:f,innerRadius:u,outerRadius:s,paddingAngle:g=0,skipAnimation:d,slotProps:l,slots:m}=e,R=Z(e,pi),P=ve({innerRadius:u,outerRadius:s,arcLabelRadius:n,cornerRadius:a,paddingAngle:g,id:f,highlighted:o,faded:c,data:r}),p=Pe(P,T({},ri,{immediate:d}));if(r.length===0)return null;const x=(m==null?void 0:m.pieArcLabel)??gi;return j.jsx("g",T({},R,{children:p((A,y)=>{let{startAngle:$,endAngle:_,paddingAngle:v,innerRadius:C,outerRadius:I,arcLabelRadius:L,cornerRadius:M}=A,k=Z(A,fi);return j.jsx(x,T({startAngle:$,endAngle:_,paddingAngle:v,innerRadius:C,outerRadius:I,arcLabelRadius:L,cornerRadius:M,style:k,id:f,color:y.color,isFaded:y.isFaded,isHighlighted:y.isHighlighted,formattedArcLabel:xi(i,t,y)},l==null?void 0:l.pieArcLabel))})}))}function xe(e,i){const{height:t,width:n}=i,{cx:a,cy:r}=e,c=Math.min(n,t)/2,o=q(a??"50%",n),f=q(r??"50%",t);return{cx:o,cy:f,availableRadius:c}}function Ai(e){const{skipAnimation:i,slots:t,slotProps:n,onItemClick:a}=e,r=je(),{left:c,top:o,width:f,height:u}=de.useContext(we),s=He(i);if(r===void 0)return null;const{series:g,seriesOrder:d}=r;return j.jsxs("g",{children:[d.map(l=>{const{innerRadius:m,outerRadius:R,cornerRadius:P,paddingAngle:p,data:x,cx:A,cy:y,highlighted:$,faded:_}=g[l],{cx:v,cy:C,availableRadius:I}=xe({cx:A,cy:y},{width:f,height:u}),L=q(R??I,I),M=q(m??0,I);return j.jsx("g",{transform:`translate(${c+v}, ${o+C})`,children:j.jsx(di,{innerRadius:M,outerRadius:L,cornerRadius:P,paddingAngle:p,id:l,data:x,skipAnimation:s,highlighted:$,faded:_,onItemClick:a,slots:t,slotProps:n})},l)}),d.map(l=>{const{innerRadius:m,outerRadius:R,arcLabelRadius:P,cornerRadius:p,paddingAngle:x,arcLabel:A,arcLabelMinAngle:y,data:$,cx:_,cy:v}=g[l],{cx:C,cy:I,availableRadius:L}=xe({cx:_,cy:v},{width:f,height:u}),M=q(R??L,L),k=q(m??0,L),h=P===void 0?(M+k)/2:q(P,L);return j.jsx("g",{transform:`translate(${c+C}, ${o+I})`,children:j.jsx(mi,{innerRadius:k,outerRadius:M??L,arcLabelRadius:h,cornerRadius:p,paddingAngle:x,id:l,data:$,skipAnimation:s,arcLabel:A,arcLabelMinAngle:y,slots:t,slotProps:n})},l)})]})}const yi=["xAxis","yAxis","series","width","height","margin","colors","sx","tooltip","axisHighlight","skipAnimation","legend","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className"],$i={top:5,bottom:5,left:5,right:100},bi={top:5,bottom:5,left:100,right:5},Li=de.forwardRef(function(i,t){const n=Fe({props:i,name:"MuiPieChart"}),{xAxis:a,yAxis:r,series:c,width:o,height:f,margin:u,colors:s,sx:g,tooltip:d={trigger:"item"},axisHighlight:l={x:"none",y:"none"},skipAnimation:m,legend:R,topAxis:P=null,leftAxis:p=null,rightAxis:x=null,bottomAxis:A=null,children:y,slots:$,slotProps:_,onItemClick:v,loading:C,highlightedItem:I,onHighlightChange:L,className:M}=n,k=Z(n,yi),h=Ee(),b=T({},h?bi:$i,u),E=T({direction:"column",position:{vertical:"middle",horizontal:h?"left":"right"}},R);return j.jsxs(Ne,T({},k,{ref:t,series:c.map(N=>T({type:"pie"},N)),width:o,height:f,margin:b,xAxis:a??[{id:Se,scaleType:"point",data:[...new Array(Math.max(0,...c.map(N=>N.data.length)))].map((N,U)=>U)}],yAxis:r,colors:s,sx:g,disableAxisListener:(d==null?void 0:d.trigger)!=="axis"&&(l==null?void 0:l.x)==="none"&&(l==null?void 0:l.y)==="none",highlightedItem:I,onHighlightChange:L,className:M,skipAnimation:m,children:[j.jsx(Ue,{topAxis:P,leftAxis:p,rightAxis:x,bottomAxis:A,slots:$,slotProps:_}),j.jsx(Ai,{slots:$,slotProps:_,onItemClick:v}),j.jsx(De,{loading:C,slots:$,slotProps:_}),j.jsx(Oe,T({},E,{slots:$,slotProps:_})),j.jsx(We,T({},l)),!C&&j.jsx(qe,T({},d,{slots:$,slotProps:_})),y]}))});export{Li as P};
