import{r as $,j as e,i as O}from"./index-8DataprN.js";import{s as L,g as P}from"./sortStandings-Dfzdx6pk.js";import{c as M,a as B}from"./calculatePercentage-BV2Zsfhd.js";import{C as E}from"./CAlert-C4trPKVu.js";import{C as R}from"./CAlertLink-lKUQ9l63.js";import{C as v,a as c}from"./CRow-DlRjeZff.js";import{C as p,a as u}from"./CCardBody-BcjQj6fe.js";import{C as m}from"./CCardHeader-DY5q4j4E.js";import{C as G,a as y,b as j,c as a,d as A,e as i}from"./CTable-C_Cq6-Pm.js";import{C}from"./CWidgetStatsB-DNDa3pgU.js";import{P as U}from"./PieChart-Dp-HdR2e.js";import{B as _}from"./BarChart-BEg7_vWV.js";import"./DefaultLayout-B-R3p-qr.js";import"./index.es-CKdQatuB.js";import"./authService-CHDukMfX.js";import"./CProgress-CSTwnkgU.js";const je=()=>{const[l,s]=$.useState({athleteData:{},schools:[],loading:!0,error:null});$.useEffect(()=>{const f=()=>{P().then(h=>{s(h)}).catch(h=>{s({athleteData:{},schools:[],loading:!0,error:null})})};f();const k=setInterval(f,1*60*1e3);return()=>clearInterval(k)},[s,setInterval]);const{athleteData:r,loading:o,error:t,syncDate:x}=l,S=L(r),g=q(S),n=g.filter(f=>f.gender==="Male"),T=g.filter(f=>f.gender==="Female");return o?e.jsx("div",{children:"Loading..."}):t?e.jsxs(E,{color:"danger",children:["An error has occurred getting scores, refresh this page. If this problem continues to persist, check the ",e.jsx(R,{href:"https://bowuu.com/all-results",target:"_blank",children:"Official Total Scores"}),"."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx(c,{xs:12,children:e.jsxs(E,{color:"info",children:["Scores as of ",x,". To update scores, refresh this page or wait 1 minute."]})})}),e.jsx(I,{finalTeam:g}),e.jsx(H,{maleFilteredStandings:n,femaleFilteredStandings:T}),e.jsx(J,{maleFilteredStandings:n,femaleFilteredStandings:T}),e.jsx(K,{filteredStandings:g}),e.jsx(V,{maleFilteredStandings:n,femaleFilteredStandings:T})]})},I=({finalTeam:l})=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"A Team"})," - Male"]}),e.jsx(u,{children:e.jsxs(G,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(y,{children:e.jsxs(j,{children:[e.jsx(a,{scope:"col",children:"Group"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"School"})]})}),e.jsx(A,{children:N(l,"A","Male").map((s,r)=>e.jsxs(j,{children:[e.jsxs(i,{children:[s.group," Group"]}),e.jsx(i,{children:s.athlete}),e.jsx(i,{children:s.school})]},`${r}_male`))})]})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"A Team"})," - Female"]}),e.jsx(u,{children:e.jsxs(G,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(y,{children:e.jsxs(j,{children:[e.jsx(a,{scope:"col",children:"Group"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"School"})]})}),e.jsx(A,{children:N(l,"A","Female").map((s,r)=>e.jsxs(j,{children:[e.jsxs(i,{children:[s.group," Group"]}),e.jsx(i,{children:s.athlete}),e.jsx(i,{children:s.school})]},`${r}_female`))})]})})]})})]}),e.jsx("br",{}),e.jsxs(v,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"B Team"})," - Male"]}),e.jsx(u,{children:e.jsxs(G,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(y,{children:e.jsxs(j,{children:[e.jsx(a,{scope:"col",children:"Group"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"School"})]})}),e.jsx(A,{children:N(l,"B","Male").map((s,r)=>e.jsxs(j,{children:[e.jsxs(i,{children:[s.group," Group"]}),e.jsx(i,{children:s.athlete}),e.jsx(i,{children:s.school})]},`${r}_male`))})]})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"B Team"})," - Female"]}),e.jsx(u,{children:e.jsxs(G,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(y,{children:e.jsxs(j,{children:[e.jsx(a,{scope:"col",children:"Group"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"School"})]})}),e.jsx(A,{children:N(l,"B","Female").map((s,r)=>e.jsxs(j,{children:[e.jsxs(i,{children:[s.group," Group"]}),e.jsx(i,{children:s.athlete}),e.jsx(i,{children:s.school})]},`${r}_female`))})]})})]})})]}),e.jsx("br",{}),e.jsxs(v,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"C Team"})," - Male"]}),e.jsx(u,{children:e.jsxs(G,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(y,{children:e.jsxs(j,{children:[e.jsx(a,{scope:"col",children:"Group"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"School"})]})}),e.jsx(A,{children:N(l,"C","Male").map((s,r)=>e.jsxs(j,{children:[e.jsxs(i,{children:[s.group," Group"]}),e.jsx(i,{children:s.athlete}),e.jsx(i,{children:s.school})]},`${r}_male`))})]})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"C Team"})," - Female"]}),e.jsx(u,{children:e.jsxs(G,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(y,{children:e.jsxs(j,{children:[e.jsx(a,{scope:"col",children:"Group"}),e.jsx(a,{scope:"col",children:"Name"}),e.jsx(a,{scope:"col",children:"School"})]})}),e.jsx(A,{children:N(l,"C","Female").map((s,r)=>e.jsxs(j,{children:[e.jsxs(i,{children:[s.group," Group"]}),e.jsx(i,{children:s.athlete}),e.jsx(i,{children:s.school})]},`${r}_female`))})]})})]})})]}),e.jsx("br",{})]}),H=({maleFilteredStandings:l,femaleFilteredStandings:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:M(b(l,"Barehand"),10)},text:"Top Barehand on the US Team",title:"Average Score of Males' ",value:`${b(l,"Barehand")} / 10.00`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:M(b(l,"Weapon"),10)},text:"Top Weapon on the US Team",title:"Average Score of Males' ",value:`${b(l,"Weapon")} / 10.00`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:M(b(s,"Barehand"),10)},text:"Top Barehand on the US Team",title:"Average Score of Females'",value:`${b(s,"Barehand")} / 10.00`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:M(b(s,"Weapon"),10)},text:"Top Weapon on the US Team",title:"Average Score of Females' ",value:`${b(s,"Weapon")} / 10.00`})})]}),e.jsx("br",{}),e.jsxs(v,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:M(F(l),20)},text:"of Males' on the US Team",title:"Average Combined Score",value:`${F(l)} / 20.00`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:100},text:"by Males on the US Team",title:"Average Number of Events",value:`${w(l)}`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:M(b(s,"Barehand"),20)},text:"of Females' on the US Team",title:"Average Combined Score",value:`${F(s)} / 20.00`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(C,{className:"mb-3",progress:{value:100},text:"by Females on the US Team",title:"Average Number of Events",value:`${w(s)}`})})]}),e.jsx("br",{})]}),J=({maleFilteredStandings:l,femaleFilteredStandings:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx("strong",{children:"Top Barehand Type of Males on US Team"})}),e.jsx(u,{children:e.jsx(W,{dataset:l})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx("strong",{children:"Top Barehand Type of Females on US Team"})}),e.jsx(u,{children:e.jsx(W,{dataset:s})})]})})]}),e.jsx("br",{})]}),K=({filteredStandings:l})=>{const{colorMode:s}=O("coreui-free-react-admin-template-theme"),r=s==="dark"?{[`.${B.root}`]:{[`.${B.tick}, .${B.line}`]:{stroke:"white",strokeWidth:3},[`.${B.tickLabel}`]:{fill:"white"}},".MuiChartsGrid-horizontalLine":{stroke:"white"},".MuiChartsLegend-series text":{color:"white !important",fill:"white !important"}}:{},o={height:300,sx:{[`.${B.left} .${B.label}`]:{transform:"translate(-20px, 0)"},...r}};return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx(c,{xs:12,sm:12,xl:12,xxl:12,children:e.jsxs(p,{children:[e.jsx(m,{children:e.jsx("strong",{children:"Top Weapon Type Distributions of Athletes on US Team"})}),e.jsx(u,{children:e.jsx(z,{dataset:Q(l),chartSetting:o})})]})})}),e.jsx("br",{})]})},z=({dataset:l,chartSetting:s})=>e.jsx(_,{dataset:l,xAxis:[{scaleType:"band",dataKey:"label"}],series:[{dataKey:"male",label:"Male",color:"#3399ff"},{dataKey:"female",label:"Female",color:"#e55353"}],grid:{horizontal:!0},...s}),V=({maleFilteredStandings:l,femaleFilteredStandings:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(v,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"US Team Breakdown by School"})," - Male"]}),e.jsx(u,{children:e.jsx(D,{dataset:l})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(p,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"US Team Breakdown by School"})," - Female"]}),e.jsx(u,{children:e.jsx(D,{dataset:s})})]})})]}),e.jsx("br",{})]});function q(l){const s=[];let r=0,o=0,t=0,x=0,S=0,g=0;return l.forEach(n=>{switch(n.group){case"A":r<9&&n.gender==="Male"?(r++,s.push(n)):o<9&&n.gender==="Female"&&(o++,s.push(n));break;case"B":t<6&&n.gender==="Male"?(t++,s.push(n)):x<6&&n.gender==="Female"&&(x++,s.push(n));break;case"C":S<6&&n.gender==="Male"?(S++,s.push(n)):g<6&&n.gender==="Female"&&(g++,s.push(n));break}}),s}function N(l,s,r){let o=[],t=[],x=[];l=l.filter(d=>d.gender===r);let S=0,g=0,n=0,T=0,f=0,k=0;l.forEach(d=>{switch(d.group){case"A":S<3&&d.gender==="Male"?S++:g<3&&d.gender==="Female"&&g++,o.push(d);break;case"B":n<2&&d.gender==="Male"?n++:T<2&&d.gender==="Female"&&T++,t.push(d);break;case"C":f<2&&d.gender==="Male"?f++:k<2&&d.gender==="Female"&&k++,x.push(d);break}});let h=[];switch(s){case"A":h.push(...o.slice(0,3)),h.push(...t.slice(0,2)),h.push(...x.slice(0,2));break;case"B":h.push(...o.slice(3,6)),h.push(...t.slice(2,4)),h.push(...x.slice(2,4));break;case"C":h.push(...o.slice(6,9)),h.push(...t.slice(2,4)),h.push(...x.slice(2,4));break}return h}function b(l,s){let r=0,o=0;l.map(x=>{x.topEvents[s].score!==0&&(r+=x.topEvents[s].score,o++)});const t=o!==0?r/o:0;return Math.round(t*1e3)/1e3}function F(l){let s=0,r=0;l.map(t=>{t.finalScore!==0&&(s+=t.finalScore,r++)});const o=r!==0?s/r:0;return Math.round(o*1e3)/1e3}function w(l){let s=0,r=0;l.map(t=>{s+=t.events.length,r++});const o=r!==0?s/r:0;return Math.round(o*1e3)/1e3}const W=({dataset:l})=>{let s={};l.map(o=>{s[o.topEvents.Barehand.type]||(s[o.topEvents.Barehand.type]=0),s[o.topEvents.Barehand.type]+=1});let r=[];return Object.entries(s).forEach(([o,t])=>{r.push({value:t,label:o})}),e.jsx(U,{margin:{left:80},series:[{data:r,highlightScope:{faded:"global",highlighted:"item"},faded:{innerRadius:30,additionalRadius:-30,color:"gray"}}],height:300,slotProps:{legend:{hidden:!0}}})},D=({dataset:l})=>{let s={};l.map(o=>{s[o.school]||(s[o.school]=0),s[o.school]+=1});let r=[];return Object.entries(s).forEach(([o,t])=>{r.push({value:t,label:o})}),e.jsx(U,{margin:{left:80},series:[{data:r,highlightScope:{faded:"global",highlighted:"item"},faded:{innerRadius:30,additionalRadius:-30,color:"gray"}}],height:300,slotProps:{legend:{hidden:!0}}})};function Q(l){let s={};return l.map(r=>{s[r.topEvents.Weapon.type]||(s[r.topEvents.Weapon.type]={male:0,female:0,label:r.topEvents.Weapon.type}),s[r.topEvents.Weapon.type][r.gender.toLowerCase()]+=1}),Object.values(s)}export{je as default};
