import{r as f,j as e}from"./index-BMZGoqpf.js";import{g as k}from"./getData-DLaOjktY.js";import{s as $}from"./sortStandings-Cn9dMIH5.js";import{c as C,a as S}from"./calculatePercentage-BtsyiZHT.js";import{C as w}from"./CAlert-Cz8zOySX.js";import{C as z}from"./CAlertLink-DZZPkSuC.js";import{C as x,a as c}from"./CRow-C_TGd6Cd.js";import{C as h,a as d}from"./CCardBody-DsMQK01L.js";import{C as m}from"./CCardHeader-rGUCmM71.js";import{C as F,a as B}from"./CInputGroupText-DCIqelDi.js";import{C as T}from"./CFormSelect-CBbYTmiL.js";import{a as R}from"./index.es-Q4sYvwA9.js";import{C as v}from"./CWidgetStatsB-jwT-1C0d.js";import{B as E}from"./BarChart-BGcjwVT2.js";import"./DefaultLayout-cU4DU8rR.js";import"./CFormControlWrapper-BQsW0Tdj.js";import"./CFormControlValidation-DopDHilO.js";import"./CFormLabel-DisLsuEY.js";import"./CProgress-4PbtG0Q0.js";const ie=()=>{const[i,o]=f.useState(""),[t,l]=f.useState(""),[r,a]=f.useState(""),[u,A]=f.useState({athleteData:{},schools:[],loading:!0,error:null});f.useEffect(()=>{const n=()=>{k().then(M=>{A(M)}).catch(M=>{A({athleteData:{},schools:[],loading:!0,error:null})})};n();const y=setInterval(n,1*60*1e3);return()=>clearInterval(y)},[A]);const{athleteData:W,schools:G,loading:I,error:K,syncDate:H}=u;let N=$(W),s=$(W);return i!==""&&(s=s.filter(n=>n.gender===i)),t!==""&&(s=s.filter(n=>n.group===t)),r!==""&&(s=s.filter(n=>n.school===r)),I?e.jsx("div",{children:"Loading..."}):K?e.jsxs(w,{color:"danger",children:["An error has occurred getting scores, refresh this page. If this problem continues to persist, contact Khai Nguyen and check the ",e.jsx(z,{href:"https://bowuu.com/all-results",target:"_blank",children:"Official Total Scores"}),"."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{children:e.jsx(c,{xs:12,children:e.jsxs(w,{color:"info",children:["Scores as of ",H,". To update scores, refresh this page or wait 1 minute."]})})}),e.jsx(x,{children:e.jsx(c,{xs:12,children:e.jsxs(h,{className:"mb-4",children:[e.jsx(m,{children:e.jsx("strong",{children:"Holistic Dashboard Filters"})}),e.jsxs(d,{children:[e.jsx(x,{children:e.jsxs(F,{className:"mb-3",children:[e.jsx(B,{style:{width:"75px"},children:"Gender: "}),e.jsxs(T,{value:i,onChange:n=>o(n.target.value),children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]})}),e.jsx(x,{children:e.jsxs(F,{className:"mb-3",children:[e.jsx(B,{style:{width:"75px"},children:"Group: "}),e.jsxs(T,{value:t,onChange:n=>l(n.target.value),children:[e.jsx("option",{value:"",children:"*"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"})]})]})}),e.jsx(x,{children:e.jsxs(F,{className:"mb-3",children:[e.jsx(B,{style:{width:"75px"},children:"School: "}),e.jsxs(T,{value:r,onChange:n=>a(n.target.value),children:[e.jsx("option",{value:"",children:"*"}),G.map((n,y)=>e.jsx("option",{value:n,children:n},y))]})]})}),e.jsx("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:e.jsx(R,{style:{},color:"primary",onClick:()=>{o(""),l(""),a("")},children:"Reset Filters"})})]})]})})}),e.jsxs(x,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(v,{className:"mb-3",color:"white",progress:{value:C(s.length,N.length)},text:"",title:"Number of Athletes",value:`${s.length} / ${N.length}`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(v,{className:"mb-3",color:"white",progress:{value:C(j(s,"Barehand"),10)},text:"",title:"Average Barehand Score",value:`${j(s,"Barehand")} / 10.00`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(v,{className:"mb-3",color:"white",progress:{value:C(j(s,"Short Weapon"),10)},text:"",title:"Average Short Weapon Score",value:`${j(s,"Short Weapon")} / 10.00`})}),e.jsx(c,{xs:12,sm:6,xl:3,xxl:3,children:e.jsx(v,{className:"mb-3",color:"white",progress:{value:C(j(s,"Long Weapon"),10)},text:"",title:"Average Long Weapon Score",value:`${j(s,"Long Weapon")} / 10.00`})})]}),e.jsx("br",{}),e.jsx(x,{children:e.jsx(c,{xs:12,sm:12,xl:12,xxl:12,children:e.jsxs(h,{children:[e.jsx(m,{children:e.jsx("strong",{children:"Number of Competitors by Barehand Events"})}),e.jsx(d,{children:e.jsx(g,{dataset:p(s,"Barehand"),type:"Count"})})]})})}),e.jsx("br",{}),e.jsxs(x,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(h,{children:[e.jsx(m,{children:e.jsx("strong",{children:"Number of Competitors by Short Weapon Events"})}),e.jsx(d,{children:e.jsx(g,{dataset:p(s,"Short Weapon"),type:"Count"})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(h,{children:[e.jsx(m,{children:e.jsx("strong",{children:"Number of Competitors by Long Weapon Events"})}),e.jsx(d,{children:e.jsx(g,{dataset:p(s,"Long Weapon"),type:"Count"})})]})})]}),e.jsx("br",{}),e.jsx(x,{children:e.jsx(c,{xs:12,sm:12,xl:12,xxl:12,children:e.jsxs(h,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"Average Scores by Barehand Events"})," ",e.jsx("br",{}),"Total Average: ",j(s,"Barehand")]}),e.jsx(d,{children:e.jsx(g,{dataset:p(s,"Barehand"),type:"Average"})})]})})}),e.jsx("br",{}),e.jsxs(x,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(h,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"Average Scores by Short Weapon Events"}),e.jsx("br",{}),"Total Average: ",j(s,"Short Weapon")]}),e.jsx(d,{children:e.jsx(g,{dataset:p(s,"Short Weapon"),type:"Average"})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(h,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"Average Scores by Long Weapon Events"}),e.jsx("br",{}),"Total Average: ",j(s,"Long Weapon")]}),e.jsx(d,{children:e.jsx(g,{dataset:p(s,"Long Weapon"),type:"Average"})})]})})]}),e.jsx("br",{}),e.jsxs(x,{xs:{gutter:3},children:[e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(h,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"Top 10 Highest Combined Score"})," - Male",e.jsx("br",{}),"Total Average: ",L(b(s,"Male"))]}),e.jsx(d,{children:e.jsx(D,{dataset:b(s,"Male"),gender:"Male"})})]})}),e.jsx(c,{xs:12,sm:12,xl:6,xxl:6,children:e.jsxs(h,{children:[e.jsxs(m,{children:[e.jsx("strong",{children:"Top 10 Highest Combined Score"})," - Female",e.jsx("br",{}),"Total Average: ",L(b(s,"Female"))]}),e.jsx(d,{children:e.jsx(D,{dataset:b(s,"Female"),gender:"Female"})})]})})]})]})},g=({dataset:i,type:o})=>{const t={height:300,sx:{[`.${S.left} .${S.label}`]:{transform:"translate(-20px, 0)"}}};let l=null;return o==="Average"&&(l=[{max:10}]),e.jsx(E,{dataset:i,xAxis:[{scaleType:"band",dataKey:"label"}],yAxis:l,series:[{dataKey:`male${o}`,label:"Male",color:"#3399ff"},{dataKey:`female${o}`,label:"Female",color:"#e55353"}],grid:{horizontal:!0},...t})},D=({dataset:i,gender:o})=>{const t={height:300,sx:{[`.${S.left} .${S.label}`]:{transform:"translate(-20px, 0)"}}},l=o==="Male"?"#3399ff":"#e55353";return e.jsx(E,{dataset:i,xAxis:[{scaleType:"band",dataKey:"name"}],yAxis:[{max:20}],series:[{dataKey:"score",label:"Combined Score",color:l}],grid:{horizontal:!0},...t})};function j(i,o){let t=0,l=0;i.map(a=>{a.events.forEach(u=>{u.class===o&&(t=t+u.score,l++)})});const r=l!==0?t/l:0;return Math.round(r*100)/100}function L(i){let o=0,t=0;i.map(r=>{o+=r.score,t++});const l=t!==0?o/t:0;return Math.round(l*100)/100}function p(i,o){let t={};i.map(r=>{r.events.map(a=>{a.class===o&&(t[a.form]||(t[a.form]={maleCount:0,femaleCount:0,maleTotal:0,femaleTotal:0,maleAverage:0,femaleAverage:0,label:`${r.group} - ${a.type}`}),t[a.form][r.gender.toLowerCase()+"Count"]+=1,t[a.form][r.gender.toLowerCase()+"Total"]+=a.score)})});let l=Object.values(t);return l.map(r=>{r.maleAverage=r.maleCount!==0?Math.round(r.maleTotal/r.maleCount*100)/100:0,r.femaleAverage=r.femaleCount!==0?Math.round(r.femaleTotal/r.femaleCount*100)/100:0}),l.sort((r,a)=>r.label<a.label?-1:r.label>a.label?1:0)}function b(i,o){let t=[];const l=i.filter(a=>a.gender===o);let r=10;l.length<10&&(r=l.length);for(let a=0;a<r;a++){const u={score:l[a].finalScore,name:l[a].athlete};t.push(u)}return t}export{ie as default};
