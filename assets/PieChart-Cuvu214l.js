import{F as ce,G as U,H as F,J as E,K as he,L as w,M as ve,N,O as ae,P as ge,Q as S,T as pe,U as Me,V as Ce,_ as X,u as Te,s as xe,e as k,W as re,f as Ae,h as me,j as ye,k as $e,I as Ie,g as je,b as ke,l as _e,X as W,S as Se,D as we,Y as Fe,R as He,n as Ee,z as De,y as Ue,A as Oe,B as We,E as qe}from"./calculatePercentage-CDeMo3qS.js";import{j,r as B}from"./index-qc-dloL4.js";const oe=Math.PI,de=2*oe,O=1e-6,ze=de-O;function be(i){this._+=i[0];for(let e=1,t=i.length;e<t;++e)this._+=arguments[e]+i[e]}function Ne(i){let e=Math.floor(i);if(!(e>=0))throw new Error(`invalid digits: ${i}`);if(e>15)return be;const t=10**e;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*t)/t+n[a]}}class Xe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?be:Ne(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,a){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,t,n,a,o,c){this._append`C${+e},${+t},${+n},${+a},${this._x1=+o},${this._y1=+c}`}arcTo(e,t,n,a,o){if(e=+e,t=+t,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let c=this._x1,r=this._y1,x=n-e,l=a-t,s=c-e,g=r-t,d=s*s+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>O)if(!(Math.abs(g*x-l*s)>O)||!o)this._append`L${this._x1=e},${this._y1=t}`;else{let h=n-c,A=a-r,f=x*x+l*l,b=h*h+A*A,R=Math.sqrt(f),p=Math.sqrt(d),m=o*Math.tan((oe-Math.acos((f+d-b)/(2*R*p)))/2),$=m/p,y=m/R;Math.abs($-1)>O&&this._append`L${e+$*s},${t+$*g}`,this._append`A${o},${o},0,0,${+(g*h>s*A)},${this._x1=e+y*x},${this._y1=t+y*l}`}}arc(e,t,n,a,o,c){if(e=+e,t=+t,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let r=n*Math.cos(a),x=n*Math.sin(a),l=e+r,s=t+x,g=1^c,d=c?a-o:o-a;this._x1===null?this._append`M${l},${s}`:(Math.abs(this._x1-l)>O||Math.abs(this._y1-s)>O)&&this._append`L${l},${s}`,n&&(d<0&&(d=d%de+de),d>ze?this._append`A${n},${n},0,1,${g},${e-r},${t-x}A${n},${n},0,1,${g},${this._x1=l},${this._y1=s}`:d>O&&this._append`A${n},${n},0,${+(d>=oe)},${g},${this._x1=e+n*Math.cos(o)},${this._y1=t+n*Math.sin(o)}`)}rect(e,t,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Be(i){let e=3;return i.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);e=n}return i},()=>new Xe(e)}function Ke(i){return i.innerRadius}function Qe(i){return i.outerRadius}function Ve(i){return i.startAngle}function Ye(i){return i.endAngle}function Ze(i){return i&&i.padAngle}function Ge(i,e,t,n,a,o,c,r){var x=t-i,l=n-e,s=c-a,g=r-o,d=g*x-s*l;if(!(d*d<w))return d=(s*(e-o)-g*(i-a))/d,[i+d*x,e+d*l]}function G(i,e,t,n,a,o,c){var r=i-t,x=e-n,l=(c?o:-o)/N(r*r+x*x),s=l*x,g=-l*r,d=i+s,h=e+g,A=t+s,f=n+g,b=(d+A)/2,R=(h+f)/2,p=A-d,m=f-h,$=p*p+m*m,y=a-o,P=d*f-A*h,M=(m<0?-1:1)*N(Me(0,y*y*$-P*P)),T=(P*m-p*M)/$,v=(-P*p-m*M)/$,L=(P*m+p*M)/$,C=(-P*p+m*M)/$,I=T-b,u=v-R,_=L-b,D=C-R;return I*I+u*u>_*_+D*D&&(T=L,v=C),{cx:T,cy:v,x01:-s,y01:-g,x11:T*(a/y-1),y11:v*(a/y-1)}}function Pe(){var i=Ke,e=Qe,t=E(0),n=null,a=Ve,o=Ye,c=Ze,r=null,x=Be(l);function l(){var s,g,d=+i.apply(this,arguments),h=+e.apply(this,arguments),A=a.apply(this,arguments)-he,f=o.apply(this,arguments)-he,b=ge(f-A),R=f>A;if(r||(r=s=x()),h<d&&(g=h,h=d,d=g),!(h>w))r.moveTo(0,0);else if(b>ve-w)r.moveTo(h*U(A),h*F(A)),r.arc(0,0,h,A,f,!R),d>w&&(r.moveTo(d*U(f),d*F(f)),r.arc(0,0,d,f,A,R));else{var p=A,m=f,$=A,y=f,P=b,M=b,T=c.apply(this,arguments)/2,v=T>w&&(n?+n.apply(this,arguments):N(d*d+h*h)),L=ae(ge(h-d)/2,+t.apply(this,arguments)),C=L,I=L,u,_;if(v>w){var D=pe(v/d*F(T)),K=pe(v/h*F(T));(P-=D*2)>w?(D*=R?1:-1,$+=D,y-=D):(P=0,$=y=(A+f)/2),(M-=K*2)>w?(K*=R?1:-1,p+=K,m-=K):(M=0,p=m=(A+f)/2)}var q=h*U(p),z=h*F(p),Q=d*U(y),V=d*F(y);if(L>w){var Y=h*U(m),Z=h*F(m),J=d*U($),ee=d*F($),H;if(b<ce)if(H=Ge(q,z,J,ee,Y,Z,Q,V)){var ie=q-H[0],te=z-H[1],ne=Y-H[0],se=Z-H[1],le=1/F(Ce((ie*ne+te*se)/(N(ie*ie+te*te)*N(ne*ne+se*se)))/2),ue=N(H[0]*H[0]+H[1]*H[1]);C=ae(L,(d-ue)/(le-1)),I=ae(L,(h-ue)/(le+1))}else C=I=0}M>w?I>w?(u=G(J,ee,q,z,h,I,R),_=G(Y,Z,Q,V,h,I,R),r.moveTo(u.cx+u.x01,u.cy+u.y01),I<L?r.arc(u.cx,u.cy,I,S(u.y01,u.x01),S(_.y01,_.x01),!R):(r.arc(u.cx,u.cy,I,S(u.y01,u.x01),S(u.y11,u.x11),!R),r.arc(0,0,h,S(u.cy+u.y11,u.cx+u.x11),S(_.cy+_.y11,_.cx+_.x11),!R),r.arc(_.cx,_.cy,I,S(_.y11,_.x11),S(_.y01,_.x01),!R))):(r.moveTo(q,z),r.arc(0,0,h,p,m,!R)):r.moveTo(q,z),!(d>w)||!(P>w)?r.lineTo(Q,V):C>w?(u=G(Q,V,Y,Z,d,-C,R),_=G(q,z,J,ee,d,-C,R),r.lineTo(u.cx+u.x01,u.cy+u.y01),C<L?r.arc(u.cx,u.cy,C,S(u.y01,u.x01),S(_.y01,_.x01),!R):(r.arc(u.cx,u.cy,C,S(u.y01,u.x01),S(u.y11,u.x11),!R),r.arc(0,0,d,S(u.cy+u.y11,u.cx+u.x11),S(_.cy+_.y11,_.cx+_.x11),R),r.arc(_.cx,_.cy,C,S(_.y11,_.x11),S(_.y01,_.x01),!R))):r.arc(0,0,d,y,$,R)}if(r.closePath(),s)return r=null,s+""||null}return l.centroid=function(){var s=(+i.apply(this,arguments)+ +e.apply(this,arguments))/2,g=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-ce/2;return[U(g)*s,F(g)*s]},l.innerRadius=function(s){return arguments.length?(i=typeof s=="function"?s:E(+s),l):i},l.outerRadius=function(s){return arguments.length?(e=typeof s=="function"?s:E(+s),l):e},l.cornerRadius=function(s){return arguments.length?(t=typeof s=="function"?s:E(+s),l):t},l.padRadius=function(s){return arguments.length?(n=s==null?null:typeof s=="function"?s:E(+s),l):n},l.startAngle=function(s){return arguments.length?(a=typeof s=="function"?s:E(+s),l):a},l.endAngle=function(s){return arguments.length?(o=typeof s=="function"?s:E(+s),l):o},l.padAngle=function(s){return arguments.length?(c=typeof s=="function"?s:E(+s),l):c},l.context=function(s){return arguments.length?(r=s??null,l):r},l}const Je=["classes","color","cornerRadius","dataIndex","endAngle","highlightScope","id","innerRadius","isFaded","isHighlighted","onClick","outerRadius","paddingAngle","startAngle"];function ei(i){return ye("MuiPieArc",i)}$e("MuiPieArc",["root","highlighted","faded"]);const ii=i=>{const{classes:e,id:t,isFaded:n,isHighlighted:a}=i,o={root:["root",`series-${t}`,a&&"highlighted",n&&"faded"]};return Ae(o,ei,e)},ti=xe(me.path,{name:"MuiPieArc",slot:"Root",overridesResolver:(i,e)=>e.arc})(({theme:i})=>({stroke:(i.vars||i).palette.background.paper,strokeWidth:1,strokeLinejoin:"round"}));function ni(i){const{classes:e,color:t,cornerRadius:n,dataIndex:a,endAngle:o,highlightScope:c,id:r,innerRadius:x,isFaded:l,isHighlighted:s,onClick:g,outerRadius:d,paddingAngle:h,startAngle:A}=i,f=X(i,Je),b={id:r,dataIndex:a,classes:e,color:t,isFaded:l,isHighlighted:s},R=ii(b),p=Te(c);return j.jsx(ti,k({d:re([A,o,h,x,d,n],(m,$,y,P,M,T)=>Pe().cornerRadius(T)({padAngle:y,startAngle:m,endAngle:$,innerRadius:P,outerRadius:M})),onClick:g,cursor:g?"pointer":"unset",ownerState:b,className:R.root},f,p({type:"pie",seriesId:r,dataIndex:a})))}const si={keys:i=>i.id,from:({innerRadius:i,outerRadius:e,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:o,color:c,isFaded:r})=>({innerRadius:i,outerRadius:(i+e)/2,cornerRadius:t,startAngle:(n+a)/2,endAngle:(n+a)/2,paddingAngle:o,fill:c,opacity:r?.3:1}),leave:({innerRadius:i,startAngle:e,endAngle:t})=>({innerRadius:i,outerRadius:i,startAngle:(e+t)/2,endAngle:(e+t)/2}),enter:({innerRadius:i,outerRadius:e,startAngle:t,endAngle:n})=>({innerRadius:i,outerRadius:e,startAngle:t,endAngle:n}),update:({innerRadius:i,outerRadius:e,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:o,color:c,isFaded:r})=>({innerRadius:i,outerRadius:e,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:o,fill:c,opacity:r?.3:1}),config:{tension:120,friction:14,clamp:!0}},ai={keys:i=>i.id,from:({innerRadius:i,outerRadius:e,arcLabelRadius:t,cornerRadius:n,startAngle:a,endAngle:o,paddingAngle:c})=>({innerRadius:i,outerRadius:(i+e)/2,cornerRadius:n,arcLabelRadius:t,startAngle:(a+o)/2,endAngle:(a+o)/2,paddingAngle:c,opacity:0}),leave:({innerRadius:i,startAngle:e,endAngle:t})=>({innerRadius:i,outerRadius:i,arcLabelRadius:i,startAngle:(e+t)/2,endAngle:(e+t)/2,opacity:0}),enter:({innerRadius:i,outerRadius:e,startAngle:t,endAngle:n,arcLabelRadius:a})=>({innerRadius:i,outerRadius:e,startAngle:t,endAngle:n,arcLabelRadius:a,opacity:1}),update:({innerRadius:i,outerRadius:e,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:o,arcLabelRadius:c})=>({innerRadius:i,outerRadius:e,cornerRadius:t,startAngle:n,endAngle:a,paddingAngle:o,arcLabelRadius:c,opacity:1}),config:{tension:120,friction:14,clamp:!0}};function Le(i){const{id:e,highlightScope:t,data:n,faded:a,highlighted:o,paddingAngle:c=0,innerRadius:r=0,arcLabelRadius:x,outerRadius:l,cornerRadius:s=0}=i,{item:g}=B.useContext(Ie),d=B.useCallback(A=>{const f=je(g,{type:"pie",seriesId:e,dataIndex:A},t),b=!f&&ke(g,{type:"pie",seriesId:e,dataIndex:A},t);return{isHighlighted:f,isFaded:b}},[t,g,e]);return B.useMemo(()=>n.map((A,f)=>{const{isHighlighted:b,isFaded:R}=d(f),p=k({additionalRadius:0},R&&a||b&&o||{}),m=Math.max(0,Math.PI*(p.paddingAngle??c)/180),$=Math.max(0,p.innerRadius??r),y=Math.max(0,p.outerRadius??l+p.additionalRadius),P=p.cornerRadius??s,M=p.arcLabelRadius??x??($+y)/2;return k({},A,p,{isFaded:R,isHighlighted:b,paddingAngle:m,innerRadius:$,outerRadius:y,cornerRadius:P,arcLabelRadius:M})}),[s,r,l,c,x,n,a,d,o])}const ri=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlightScope","highlighted","faded","data","onItemClick","skipAnimation"],oi=["startAngle","endAngle","paddingAngle","innerRadius","arcLabelRadius","outerRadius","cornerRadius"];function di(i){const{slots:e,slotProps:t,innerRadius:n=0,outerRadius:a,cornerRadius:o=0,paddingAngle:c=0,id:r,highlightScope:x,highlighted:l,faded:s={additionalRadius:-5},data:g,onItemClick:d,skipAnimation:h}=i,A=X(i,ri),f=Le({innerRadius:n,outerRadius:a,cornerRadius:o,paddingAngle:c,id:r,highlightScope:x,highlighted:l,faded:s,data:g}),b=_e(f,k({},si,{immediate:h}));if(g.length===0)return null;const R=(e==null?void 0:e.pieArc)??ni;return j.jsx("g",k({},A,{children:b((p,m,$,y)=>{let{startAngle:P,endAngle:M,paddingAngle:T,innerRadius:v,outerRadius:L,cornerRadius:C}=p,I=X(p,oi);return j.jsx(R,k({startAngle:P,endAngle:M,paddingAngle:T,innerRadius:v,outerRadius:L,cornerRadius:C,style:I,id:r,color:m.color,dataIndex:y,highlightScope:x,isFaded:m.isFaded,isHighlighted:m.isHighlighted,onClick:d&&(u=>{d(u,{type:"pie",seriesId:r,dataIndex:y},m)})},t==null?void 0:t.pieArc))})}))}const li=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style"];function ui(i){return ye("MuiPieArcLabel",i)}$e("MuiPieArcLabel",["root","highlighted","faded"]);const ci=i=>{const{classes:e,id:t,isFaded:n,isHighlighted:a}=i,o={root:["root",`series-${t}`,a&&"highlighted",n&&"faded"]};return Ae(o,ui,e)},hi=xe(me.text,{name:"MuiPieArcLabel",slot:"Root",overridesResolver:(i,e)=>e.root})(({theme:i})=>({fill:(i.vars||i).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle"})),fe=(i,e)=>(t,n,a,o,c)=>{if(!i)return 0;const[r,x]=Pe().cornerRadius(c).centroid({padAngle:a,startAngle:t,endAngle:n,innerRadius:o,outerRadius:o});return e==="x"?r:x};function gi(i){const{id:e,classes:t,color:n,startAngle:a,endAngle:o,paddingAngle:c,arcLabelRadius:r,cornerRadius:x,formattedArcLabel:l,isHighlighted:s,isFaded:g,style:d}=i,h=X(i,li),f=ci({id:e,classes:t,isFaded:g,isHighlighted:s});return j.jsx(hi,k({className:f.root},h,{style:k({x:re([a,o,c,r,x],fe(l,"x")),y:re([a,o,c,r,x],fe(l,"y"))},d),children:l}))}const pi=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","highlightScope","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],fi=["startAngle","endAngle","paddingAngle","innerRadius","outerRadius","arcLabelRadius","cornerRadius"],Ri=180/Math.PI;function xi(i,e,t){var a;return!i||(t.endAngle-t.startAngle)*Ri<e?null:typeof i=="string"?(a=t[i])==null?void 0:a.toString():i(t)}function Ai(i){const{arcLabel:e,arcLabelMinAngle:t=0,arcLabelRadius:n,cornerRadius:a=0,data:o,faded:c={additionalRadius:-5},highlighted:r,highlightScope:x,id:l,innerRadius:s,outerRadius:g,paddingAngle:d=0,skipAnimation:h,slotProps:A,slots:f}=i,b=X(i,pi),R=Le({innerRadius:s,outerRadius:g,arcLabelRadius:n,cornerRadius:a,paddingAngle:d,id:l,highlightScope:x,highlighted:r,faded:c,data:o}),p=_e(R,k({},ai,{immediate:h}));if(o.length===0)return null;const m=(f==null?void 0:f.pieArcLabel)??gi;return j.jsx("g",k({},b,{children:p(($,y)=>{let{startAngle:P,endAngle:M,paddingAngle:T,innerRadius:v,outerRadius:L,arcLabelRadius:C,cornerRadius:I}=$,u=X($,fi);return j.jsx(m,k({startAngle:P,endAngle:M,paddingAngle:T,innerRadius:v,outerRadius:L,arcLabelRadius:C,cornerRadius:I,style:u,id:l,color:y.color,isFaded:y.isFaded,isHighlighted:y.isHighlighted,formattedArcLabel:xi(e,t,y)},A==null?void 0:A.pieArcLabel))})}))}function Re(i,e){const{height:t,width:n}=e,{cx:a,cy:o}=i,c=Math.min(n,t)/2,r=W(a??"50%",n),x=W(o??"50%",t);return{cx:r,cy:x,availableRadius:c}}function mi(i){const{skipAnimation:e,slots:t,slotProps:n,onItemClick:a}=i,o=B.useContext(Se).pie,{left:c,top:r,width:x,height:l}=B.useContext(we);if(o===void 0)return null;const{series:s,seriesOrder:g}=o;return j.jsxs("g",{children:[g.map(d=>{const{innerRadius:h,outerRadius:A,cornerRadius:f,paddingAngle:b,data:R,cx:p,cy:m,highlighted:$,faded:y,highlightScope:P}=s[d],{cx:M,cy:T,availableRadius:v}=Re({cx:p,cy:m},{width:x,height:l}),L=W(A??v,v),C=W(h??0,v);return j.jsx("g",{transform:`translate(${c+M}, ${r+T})`,children:j.jsx(di,{innerRadius:C,outerRadius:L,cornerRadius:f,paddingAngle:b,id:d,data:R,skipAnimation:e,highlightScope:P,highlighted:$,faded:y,onItemClick:a,slots:t,slotProps:n})},d)}),g.map(d=>{const{innerRadius:h,outerRadius:A,arcLabelRadius:f,cornerRadius:b,paddingAngle:R,arcLabel:p,arcLabelMinAngle:m,data:$,cx:y,cy:P,highlightScope:M}=s[d],{cx:T,cy:v,availableRadius:L}=Re({cx:y,cy:P},{width:x,height:l}),C=W(A??L,L),I=W(h??0,L),u=f===void 0?(C+I)/2:W(f,L);return j.jsx("g",{transform:`translate(${c+T}, ${r+v})`,children:j.jsx(Ai,{innerRadius:I,outerRadius:C??L,arcLabelRadius:u,cornerRadius:b,paddingAngle:R,id:d,data:$,skipAnimation:e,arcLabel:p,arcLabelMinAngle:m,highlightScope:M,slots:t,slotProps:n})},d)})]})}const yi=()=>Fe().direction==="rtl",$i={top:5,bottom:5,left:5,right:100},_i={top:5,bottom:5,left:100,right:5};function Li(i){const{xAxis:e,yAxis:t,series:n,width:a,height:o,margin:c,colors:r,sx:x,tooltip:l={trigger:"item"},axisHighlight:s={x:"none",y:"none"},skipAnimation:g,legend:d,topAxis:h=null,leftAxis:A=null,rightAxis:f=null,bottomAxis:b=null,children:R,slots:p,slotProps:m,onItemClick:$,loading:y}=i,P=yi(),M=k({},P?_i:$i,c),T=k({direction:"column",position:{vertical:"middle",horizontal:P?"left":"right"}},d);return j.jsxs(He,{series:n.map(v=>k({type:"pie"},v)),width:a,height:o,margin:M,xAxis:e??[{id:Ee,scaleType:"point",data:[...new Array(Math.max(...n.map(v=>v.data.length)))].map((v,L)=>L)}],yAxis:t,colors:r,sx:x,disableAxisListener:(l==null?void 0:l.trigger)!=="axis"&&(s==null?void 0:s.x)==="none"&&(s==null?void 0:s.y)==="none",children:[j.jsx(De,{topAxis:h,leftAxis:A,rightAxis:f,bottomAxis:b,slots:p,slotProps:m}),j.jsx(mi,{slots:p,slotProps:m,onItemClick:$,skipAnimation:g}),j.jsx(Ue,{loading:y,slots:p,slotProps:m}),j.jsx(Oe,k({},T,{slots:p,slotProps:m})),j.jsx(We,k({},s)),!y&&j.jsx(qe,k({},l,{slots:p,slotProps:m})),R]})}export{Li as P};
